<!DOCTYPE html>
<html lang="en" data-theme="dark" data-color="navy">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LakshyaSetu AI - Career Intelligence Platform</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;1,400&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box
    }

    :root {
      --primary: #F59E0B;
      --primary-dark: #D97706;
      --primary-light: #FCD34D;
      --secondary: #1E3A5F;
      --secondary-dark: #0F1F33;
      --accent: #38BDF8;
      --bg-base: #0A0F1E;
      --bg-surface: #111827;
      --bg-card: #1A2235;
      --bg-input: #1E293B;
      --bg-hover: #243049;
      --border: rgba(255, 255, 255, 0.08);
      --text-primary: #F1F5F9;
      --text-secondary: #94A3B8;
      --text-muted: #64748B;
      --shadow: 0 4px 30px rgba(0, 0, 0, 0.4);
      --shadow-card: 0 8px 40px rgba(0, 0, 0, 0.5);
      --glow: 0 0 30px rgba(245, 158, 11, 0.2);
      --sidebar-bg: #0D1526;
      --chatpanel-bg: #0F1623;
      --chatpanel-w: 320px;
    }

    [data-theme="light"] {
      --bg-base: #F0F4FF;
      --bg-surface: #FFFFFF;
      --bg-card: #FFFFFF;
      --bg-input: #F8FAFF;
      --bg-hover: #EEF2FF;
      --border: rgba(0, 0, 0, 0.09);
      --text-primary: #0F172A;
      --text-secondary: #475569;
      --text-muted: #94A3B8;
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      --shadow-card: 0 8px 30px rgba(0, 0, 0, 0.12);
      --glow: 0 0 30px rgba(245, 158, 11, 0.15);
      --sidebar-bg: #1E3A5F;
      --chatpanel-bg: #F8FAFF;
    }

    [data-color="green"] {
      --primary: #FBBF24;
      --primary-dark: #F59E0B;
      --primary-light: #FDE68A;
      --secondary: #065F46;
      --secondary-dark: #022C22;
      --accent: #34D399;
      --sidebar-bg: #022C22;
    }

    [data-color="green"][data-theme="light"] {
      --sidebar-bg: #065F46;
    }

    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--bg-base);
      color: var(--text-primary);
      min-height: 100vh;
      transition: background .3s, color .3s;
      overflow-x: hidden;
    }

    /* ─── SCROLLBAR ─── */
    ::-webkit-scrollbar {
      width: 5px;
      height: 5px
    }

    ::-webkit-scrollbar-track {
      background: transparent
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(245, 158, 11, 0.3);
      border-radius: 3px
    }

    /* ══════════════════════════════════════════
   LOGIN PAGE
══════════════════════════════════════════ */
    #loginPage {
      min-height: 100vh;
      display: flex;
      position: relative
    }

    .login-left {
      width: 48%;
      background: linear-gradient(135deg, var(--secondary-dark) 0%, var(--secondary) 60%, #1a4a7a 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 60px 50px;
      position: relative;
      overflow: hidden;
    }

    [data-color="green"] .login-left {
      background: linear-gradient(135deg, #022C22 0%, #065F46 60%, #047857 100%)
    }

    .login-left::before {
      content: '';
      position: absolute;
      width: 420px;
      height: 420px;
      background: radial-gradient(circle, rgba(245, 158, 11, .15) 0%, transparent 70%);
      top: -120px;
      right: -100px;
      border-radius: 50%;
      animation: pulse 4s ease-in-out infinite
    }

    .login-left::after {
      content: '';
      position: absolute;
      width: 280px;
      height: 280px;
      background: radial-gradient(circle, rgba(56, 189, 248, .1) 0%, transparent 70%);
      bottom: -80px;
      left: -60px;
      border-radius: 50%
    }

    @keyframes pulse {

      0%,
      100% {
        transform: scale(1);
        opacity: .7
      }

      50% {
        transform: scale(1.1);
        opacity: 1
      }
    }

    .left-content {
      position: relative;
      z-index: 1;
      text-align: center;
      max-width: 420px
    }

    .brand-logo {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      margin-bottom: 36px
    }

    .brand-icon {
      width: 52px;
      height: 52px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      color: #fff;
      box-shadow: 0 8px 25px rgba(245, 158, 11, .4)
    }

    .brand-name {
      font-family: 'Sora', sans-serif;
      font-size: 24px;
      font-weight: 700;
      color: #fff
    }

    .brand-name span {
      color: var(--primary)
    }

    .left-content h2 {
      font-family: 'Sora', sans-serif;
      font-size: 30px;
      font-weight: 700;
      color: #fff;
      margin-bottom: 14px;
      line-height: 1.35
    }

    .left-content>p {
      color: rgba(255, 255, 255, .65);
      font-size: 14px;
      line-height: 1.7;
      margin-bottom: 36px
    }

    .left-features {
      display: flex;
      flex-direction: column;
      gap: 13px;
      width: 100%
    }

    .left-feature {
      display: flex;
      align-items: center;
      gap: 14px;
      background: rgba(255, 255, 255, .07);
      border: 1px solid rgba(255, 255, 255, .1);
      border-radius: 12px;
      padding: 13px 16px;
      text-align: left;
      backdrop-filter: blur(10px);
      transition: transform .2s
    }

    .left-feature:hover {
      transform: translateX(4px)
    }

    .left-feature-icon {
      width: 38px;
      height: 38px;
      background: rgba(245, 158, 11, .2);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
      font-size: 15px;
      flex-shrink: 0
    }

    .left-feature-text strong {
      display: block;
      color: #fff;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 2px
    }

    .left-feature-text span {
      color: rgba(255, 255, 255, .5);
      font-size: 12px
    }

    .left-stats {
      display: flex;
      gap: 28px;
      margin-top: 32px;
      justify-content: center
    }

    .left-stat-num {
      font-family: 'Sora', sans-serif;
      font-size: 28px;
      font-weight: 800;
      color: var(--primary)
    }

    .left-stat-label {
      color: rgba(255, 255, 255, .5);
      font-size: 11px
    }

    /* Right Panel */
    .login-right {
      width: 52%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 40px 50px;
      background: var(--bg-surface);
      position: relative;
      overflow-y: auto;
    }

    .login-controls {
      position: absolute;
      top: 18px;
      right: 18px;
      display: flex;
      gap: 7px;
      z-index: 10
    }

    .ctrl-btn {
      padding: 7px 12px;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--bg-input);
      color: var(--text-secondary);
      font-family: 'DM Sans', sans-serif;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      transition: all .2s;
      display: flex;
      align-items: center;
      gap: 5px
    }

    .ctrl-btn:hover {
      border-color: var(--primary);
      color: var(--primary)
    }

    .ctrl-btn.active {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary)
    }

    .login-form-box {
      width: 100%;
      max-width: 420px
    }

    .form-header {
      margin-bottom: 26px
    }

    .form-header h1 {
      font-family: 'Sora', sans-serif;
      font-size: 26px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 6px
    }

    .form-header p {
      color: var(--text-secondary);
      font-size: 13px
    }

    .auth-tabs {
      display: flex;
      background: var(--bg-input);
      border-radius: 10px;
      padding: 4px;
      margin-bottom: 24px;
      border: 1px solid var(--border)
    }

    .auth-tab {
      flex: 1;
      padding: 9px;
      border: none;
      background: transparent;
      color: var(--text-secondary);
      font-family: 'DM Sans', sans-serif;
      font-size: 14px;
      font-weight: 500;
      border-radius: 7px;
      cursor: pointer;
      transition: all .25s
    }

    .auth-tab.active {
      background: var(--primary);
      color: #fff;
      font-weight: 600;
      box-shadow: 0 2px 12px rgba(245, 158, 11, .4)
    }

    .social-buttons {
      display: flex;
      gap: 9px;
      margin-bottom: 18px
    }

    .social-btn {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 11px 14px;
      border: 1.5px solid var(--border);
      border-radius: 10px;
      background: var(--bg-input);
      color: var(--text-primary);
      font-family: 'DM Sans', sans-serif;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all .2s
    }

    .social-btn:hover {
      background: var(--bg-hover);
      border-color: var(--primary);
      transform: translateY(-1px);
      box-shadow: var(--glow)
    }

    .divider {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 18px;
      color: var(--text-muted);
      font-size: 12px
    }

    .divider::before,
    .divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--border)
    }

    .field-group {
      margin-bottom: 14px
    }

    .field-group label {
      display: block;
      font-size: 12px;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: .5px
    }

    .field-wrap {
      position: relative
    }

    .field-wrap .fi {
      position: absolute;
      left: 13px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-muted);
      font-size: 13px;
      pointer-events: none;
      transition: color .2s;
      z-index: 1
    }

    .field-wrap input,
    .field-wrap select {
      width: 100%;
      padding: 11px 13px 11px 40px;
      background: var(--bg-input);
      border: 1.5px solid var(--border);
      border-radius: 10px;
      color: var(--text-primary);
      font-family: 'DM Sans', sans-serif;
      font-size: 14px;
      outline: none;
      transition: all .2s
    }

    .field-wrap input:focus,
    .field-wrap select:focus {
      border-color: var(--primary);
      background: var(--bg-hover);
      box-shadow: 0 0 0 3px rgba(245, 158, 11, .12)
    }

    .field-wrap input::placeholder {
      color: var(--text-muted)
    }

    .field-wrap .eye-btn {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      font-size: 13px;
      transition: color .2s;
      padding: 4px
    }

    .field-wrap .eye-btn:hover {
      color: var(--primary)
    }

    .field-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px
    }

    .form-options {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 18px
    }

    .cb-label {
      display: flex;
      align-items: center;
      gap: 7px;
      cursor: pointer;
      font-size: 13px;
      color: var(--text-secondary)
    }

    .cb-label input {
      accent-color: var(--primary);
      width: 14px;
      height: 14px
    }

    .forgot-link {
      font-size: 13px;
      color: var(--primary);
      text-decoration: none;
      font-weight: 500
    }

    .forgot-link:hover {
      text-decoration: underline
    }

    .strength-bar {
      display: flex;
      gap: 4px;
      margin-top: 5px
    }

    .strength-seg {
      height: 3px;
      flex: 1;
      background: var(--border);
      border-radius: 2px;
      transition: background .3s
    }

    .strength-label {
      font-size: 11px;
      margin-top: 3px;
      color: var(--text-muted)
    }

    .btn-submit {
      width: 100%;
      padding: 13px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: #fff;
      border: none;
      border-radius: 10px;
      font-family: 'Sora', sans-serif;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all .25s;
      box-shadow: 0 4px 20px rgba(245, 158, 11, .35);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px
    }

    .btn-submit:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 28px rgba(245, 158, 11, .5)
    }

    .btn-submit:active {
      transform: translateY(0)
    }

    .switch-text {
      text-align: center;
      margin-top: 16px;
      font-size: 13px;
      color: var(--text-secondary)
    }

    .switch-text a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 600
    }

    .switch-text a:hover {
      text-decoration: underline
    }

    .terms-text {
      font-size: 11px;
      color: var(--text-muted);
      text-align: center;
      margin-top: 10px;
      line-height: 1.6
    }

    .terms-text a {
      color: var(--primary);
      text-decoration: none
    }

    /* Resume upload on signup */
    .upload-area {
      border: 2px dashed var(--border);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all .2s;
      background: var(--bg-input);
      margin-bottom: 14px
    }

    .upload-area:hover,
    .upload-area.dragging {
      border-color: var(--primary);
      background: rgba(245, 158, 11, .05)
    }

    .upload-area i {
      font-size: 24px;
      color: var(--primary);
      margin-bottom: 8px
    }

    .upload-area p {
      font-size: 13px;
      color: var(--text-secondary)
    }

    .upload-area span {
      font-size: 11px;
      color: var(--text-muted)
    }

    .upload-area .file-name {
      font-size: 12px;
      color: var(--primary);
      margin-top: 6px;
      font-weight: 600;
      display: none
    }

    /* ─── GOOGLE ACCOUNT PICKER MODAL ─── */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, .6);
      backdrop-filter: blur(6px);
      z-index: 9999;
      display: none;
      align-items: center;
      justify-content: center;
      animation: fadeIn .2s
    }

    .modal-overlay.open {
      display: flex
    }

    @keyframes fadeIn {
      from {
        opacity: 0
      }

      to {
        opacity: 1
      }
    }

    .google-picker {
      background: var(--bg-surface);
      border-radius: 16px;
      padding: 0;
      width: 380px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 0, 0, .5);
      animation: slideUp .25s ease
    }

    @keyframes slideUp {
      from {
        transform: translateY(20px);
        opacity: 0
      }

      to {
        transform: translateY(0);
        opacity: 1
      }
    }

    .gp-header {
      padding: 24px 24px 16px;
      text-align: center;
      border-bottom: 1px solid var(--border)
    }

    .gp-header img {
      width: 75px;
      margin-bottom: 12px
    }

    .gp-logo {
      font-size: 32px;
      color: #4285F4;
      margin-bottom: 8px
    }

    .gp-header h3 {
      font-family: 'Sora', sans-serif;
      font-size: 17px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 4px
    }

    .gp-header p {
      font-size: 13px;
      color: var(--text-secondary)
    }

    .gp-accounts {
      padding: 12px
    }

    .gp-account {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 12px 14px;
      border-radius: 10px;
      cursor: pointer;
      transition: background .2s;
      border: 1px solid transparent
    }

    .gp-account:hover {
      background: var(--bg-hover);
      border-color: var(--border)
    }

    .gp-avatar {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      font-weight: 700;
      color: #fff;
      flex-shrink: 0
    }

    .gp-account-info {
      flex: 1
    }

    .gp-account-name {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary)
    }

    .gp-account-email {
      font-size: 12px;
      color: var(--text-secondary)
    }

    .gp-account-check {
      color: var(--primary);
      font-size: 14px
    }

    .gp-divider {
      height: 1px;
      background: var(--border);
      margin: 8px 0
    }

    .gp-add {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 12px 14px;
      border-radius: 10px;
      cursor: pointer;
      transition: background .2s;
      color: var(--text-secondary);
      font-size: 14px;
      font-weight: 500
    }

    .gp-add:hover {
      background: var(--bg-hover);
      color: var(--primary)
    }

    .gp-add-icon {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      border: 2px dashed var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      color: var(--text-muted)
    }

    .gp-footer {
      padding: 12px 24px;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: flex-end
    }

    .gp-cancel {
      padding: 8px 18px;
      border: none;
      background: transparent;
      color: var(--text-secondary);
      font-family: 'DM Sans', sans-serif;
      font-size: 13px;
      cursor: pointer;
      border-radius: 8px
    }

    .gp-cancel:hover {
      background: var(--bg-hover);
      color: var(--text-primary)
    }

    /* LinkedIn Modal */
    .linkedin-modal {
      background: var(--bg-surface);
      border-radius: 16px;
      padding: 28px;
      width: 380px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, .5);
      animation: slideUp .25s ease
    }

    .lm-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px
    }

    .lm-logo {
      width: 42px;
      height: 42px;
      background: #0A66C2;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 20px
    }

    .lm-header h3 {
      font-family: 'Sora', sans-serif;
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary)
    }

    .lm-header p {
      font-size: 12px;
      color: var(--text-secondary)
    }

    /* ══════════════════════════════════════════
   APP LAYOUT — 3 column: sidebar | content | chat
══════════════════════════════════════════ */
    #mainApp {
      display: flex;
      min-height: 100vh;
      position: relative
    }

    /* ─── SIDEBAR ─── */
    .sidebar {
      width: 220px;
      background: var(--sidebar-bg);
      border-right: 1px solid rgba(255, 255, 255, .06);
      display: flex;
      flex-direction: column;
      padding: 0;
      position: fixed;
      height: 100vh;
      left: 0;
      top: 0;
      z-index: 100;
      transition: background .3s;
      flex-shrink: 0;
    }

    .sidebar-logo {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 18px 16px;
      border-bottom: 1px solid rgba(255, 255, 255, .07);
      text-decoration: none;
      cursor: pointer
    }

    .slogo-icon {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 15px;
      box-shadow: 0 4px 12px rgba(245, 158, 11, .35);
      flex-shrink: 0
    }

    .slogo-text {
      font-family: 'Sora', sans-serif;
      font-size: 14px;
      font-weight: 700;
      color: #fff
    }

    .nav-menu {
      flex: 1;
      padding: 10px 8px;
      overflow-y: auto
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 11px;
      padding: 10px 11px;
      border-radius: 9px;
      color: rgba(255, 255, 255, .55);
      text-decoration: none;
      font-size: 13px;
      font-weight: 500;
      transition: all .2s;
      margin-bottom: 2px;
      cursor: pointer;
      border: 1px solid transparent
    }

    .nav-item i {
      width: 16px;
      font-size: 14px;
      flex-shrink: 0
    }

    .nav-item:hover {
      background: rgba(255, 255, 255, .07);
      color: #fff
    }

    .nav-item.active {
      background: rgba(245, 158, 11, .14);
      color: var(--primary);
      border-color: rgba(245, 158, 11, .2)
    }

    .sidebar-bottom {
      padding: 10px 8px;
      border-top: 1px solid rgba(255, 255, 255, .07)
    }

    .sidebar-ctrl-row {
      display: flex;
      gap: 5px;
      margin-bottom: 8px
    }

    .sb-ctrl {
      flex: 1;
      padding: 7px 5px;
      background: rgba(255, 255, 255, .05);
      border: 1px solid rgba(255, 255, 255, .07);
      border-radius: 8px;
      color: rgba(255, 255, 255, .5);
      font-size: 11px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      transition: all .2s;
      font-family: 'DM Sans', sans-serif
    }

    .sb-ctrl:hover {
      background: rgba(245, 158, 11, .12);
      color: var(--primary)
    }

    .sb-ctrl.on {
      color: var(--primary);
      border-color: rgba(245, 158, 11, .25)
    }

    .user-card {
      display: flex;
      align-items: center;
      gap: 9px;
      padding: 10px 11px;
      border-radius: 9px;
      cursor: pointer;
      transition: background .2s;
      background: rgba(255, 255, 255, .04);
      border: 1px solid rgba(255, 255, 255, .06)
    }

    .user-card:hover {
      background: rgba(245, 158, 11, .1);
      border-color: rgba(245, 158, 11, .2)
    }

    .user-av {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 13px;
      font-weight: 700;
      flex-shrink: 0;
      overflow: hidden
    }

    .user-av img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 50%
    }

    .user-details {
      flex: 1;
      min-width: 0
    }

    .user-name-txt {
      display: block;
      color: #fff;
      font-size: 12px;
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis
    }

    .user-status-txt {
      color: rgba(255, 255, 255, .4);
      font-size: 10px
    }

    .user-card .edit-icon {
      color: rgba(255, 255, 255, .3);
      font-size: 12px
    }

    /* ─── MAIN CONTENT ─── */
    .main-content {
      flex: 1;
      margin-left: 220px;
      margin-right: var(--chatpanel-w);
      min-height: 100vh;
      background: var(--bg-base);
      transition: margin .3s;
    }

    .content-section {
      display: none;
      padding: 32px 36px;
      animation: fadeUp .3s ease
    }

    .content-section.active {
      display: block
    }

    @keyframes fadeUp {
      from {
        opacity: 0;
        transform: translateY(12px)
      }

      to {
        opacity: 1;
        transform: translateY(0)
      }
    }

    .section-header {
      margin-bottom: 28px
    }

    .section-header h1 {
      font-family: 'Sora', sans-serif;
      font-size: 26px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 6px
    }

    .section-header p {
      color: var(--text-secondary);
      font-size: 14px
    }

    /* Hero */
    .hero-section {
      background: linear-gradient(135deg, var(--secondary-dark), var(--secondary));
      border-radius: 18px;
      padding: 44px 40px;
      margin-bottom: 28px;
      position: relative;
      overflow: hidden
    }

    [data-color="green"] .hero-section {
      background: linear-gradient(135deg, #022C22, #065F46)
    }

    .hero-section::after {
      content: '';
      position: absolute;
      right: -60px;
      top: -60px;
      width: 280px;
      height: 280px;
      background: radial-gradient(circle, rgba(245, 158, 11, .15) 0%, transparent 70%);
      border-radius: 50%
    }

    .hero-section h1 {
      font-family: 'Sora', sans-serif;
      font-size: 32px;
      font-weight: 800;
      color: #fff;
      margin-bottom: 10px
    }

    .highlight {
      color: var(--primary)
    }

    .hero-section>p {
      color: rgba(255, 255, 255, .7);
      font-size: 15px;
      margin-bottom: 26px
    }

    .hero-stats {
      display: flex;
      gap: 16px;
      flex-wrap: wrap
    }

    .stat-card {
      background: rgba(255, 255, 255, .1);
      border: 1px solid rgba(255, 255, 255, .15);
      border-radius: 12px;
      padding: 14px 22px;
      text-align: center
    }

    .stat-number {
      display: block;
      font-family: 'Sora', sans-serif;
      font-size: 26px;
      font-weight: 800;
      color: var(--primary)
    }

    .stat-label {
      color: rgba(255, 255, 255, .6);
      font-size: 11px
    }

    .glass-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 26px;
      box-shadow: var(--shadow);
      transition: background .3s, border-color .3s
    }

    .glass-card h2 {
      font-family: 'Sora', sans-serif;
      font-size: 17px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 18px;
      display: flex;
      align-items: center;
      gap: 9px
    }

    .glass-card h2 i {
      color: var(--primary)
    }

    .quick-actions {
      margin-bottom: 26px
    }

    .quick-actions h2 {
      font-family: 'Sora', sans-serif;
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
      color: var(--text-primary)
    }

    .action-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 14px
    }

    .action-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 13px;
      padding: 20px;
      cursor: pointer;
      transition: all .25s
    }

    .action-card:hover {
      transform: translateY(-3px);
      border-color: var(--primary);
      box-shadow: var(--glow)
    }

    .action-icon {
      width: 42px;
      height: 42px;
      background: rgba(245, 158, 11, .12);
      border-radius: 11px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
      font-size: 17px;
      margin-bottom: 13px
    }

    .action-card h3 {
      font-family: 'Sora', sans-serif;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 5px
    }

    .action-card p {
      color: var(--text-secondary);
      font-size: 12px;
      line-height: 1.5
    }

    .banner {
      display: flex;
      align-items: center;
      gap: 18px;
      background: linear-gradient(135deg, rgba(245, 158, 11, .08), rgba(56, 189, 248, .06));
      border: 1px solid rgba(245, 158, 11, .2);
      border-radius: 14px;
      padding: 20px 24px
    }

    .banner-icon {
      width: 46px;
      height: 46px;
      background: rgba(245, 158, 11, .15);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
      font-size: 18px;
      flex-shrink: 0
    }

    .banner-content h3 {
      font-family: 'Sora', sans-serif;
      font-size: 15px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 3px
    }

    .banner-content p {
      color: var(--text-secondary);
      font-size: 12px
    }

    .banner-btn {
      margin-left: auto;
      padding: 9px 18px;
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: 8px;
      font-family: 'DM Sans', sans-serif;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
      transition: all .2s;
      flex-shrink: 0
    }

    .banner-btn:hover {
      background: var(--primary-dark)
    }

    /* Forms in app */
    .input-card {
      margin-bottom: 24px
    }

    .form-group {
      margin-bottom: 14px
    }

    .form-group label {
      display: block;
      font-size: 12px;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: .4px
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 10px 13px;
      background: var(--bg-input);
      border: 1.5px solid var(--border);
      border-radius: 9px;
      color: var(--text-primary);
      font-family: 'DM Sans', sans-serif;
      font-size: 13px;
      outline: none;
      transition: all .2s
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(245, 158, 11, .1)
    }

    .form-group select option {
      background: var(--bg-card)
    }

    .form-group textarea {
      resize: vertical;
      min-height: 80px
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px
    }

    .btn-primary {
      padding: 11px 22px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: #fff;
      border: none;
      border-radius: 9px;
      font-family: 'Sora', sans-serif;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all .2s;
      display: inline-flex;
      align-items: center;
      gap: 7px;
      box-shadow: 0 4px 16px rgba(245, 158, 11, .3)
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 22px rgba(245, 158, 11, .45)
    }

    /* Results */
    .results-container {
      display: grid;
      gap: 14px
    }

    .result-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 13px;
      padding: 20px 22px;
      transition: all .2s
    }

    .result-card:hover {
      border-color: var(--primary);
      box-shadow: var(--glow)
    }

    .result-card h3 {
      font-family: 'Sora', sans-serif;
      font-size: 15px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 7px
    }

    .match-score {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 3px 9px;
      background: rgba(245, 158, 11, .12);
      color: var(--primary);
      border-radius: 5px;
      font-size: 11px;
      font-weight: 700;
      margin-bottom: 8px
    }

    .skill-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-top: 9px
    }

    .skill-tag {
      padding: 3px 9px;
      background: var(--bg-input);
      border: 1px solid var(--border);
      border-radius: 5px;
      font-size: 11px;
      color: var(--text-secondary)
    }

    .skill-tag.missing {
      border-color: rgba(239, 68, 68, .4);
      color: #EF4444;
      background: rgba(239, 68, 68, .08)
    }

    .skill-tag.present {
      border-color: rgba(34, 197, 94, .4);
      color: #22C55E;
      background: rgba(34, 197, 94, .08)
    }

    .progress-bar {
      height: 5px;
      background: var(--border);
      border-radius: 3px;
      overflow: hidden;
      margin-top: 9px
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--primary-light));
      border-radius: 3px;
      transition: width .6s ease
    }

    /* Emotion buttons */
    .emotion-selector {
      margin-bottom: 20px
    }

    .emotion-selector h3 {
      font-family: 'Sora', sans-serif;
      font-size: 15px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 12px
    }

    .emotion-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 8px
    }

    .emotion-btn {
      display: flex;
      align-items: center;
      gap: 7px;
      padding: 8px 16px;
      background: var(--bg-card);
      border: 1.5px solid var(--border);
      border-radius: 24px;
      color: var(--text-secondary);
      font-family: 'DM Sans', sans-serif;
      font-size: 12px;
      cursor: pointer;
      transition: all .2s
    }

    .emotion-btn:hover,
    .emotion-btn.active {
      border-color: var(--primary);
      color: var(--primary);
      background: rgba(245, 158, 11, .08)
    }

    .mentor-intro {
      display: flex;
      gap: 18px;
      align-items: center;
      margin-bottom: 20px
    }

    .mentor-avatar {
      width: 56px;
      height: 56px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 22px;
      flex-shrink: 0
    }

    .mentor-info h2 {
      font-family: 'Sora', sans-serif;
      font-size: 17px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 3px
    }

    .mentor-info p {
      color: var(--text-secondary);
      font-size: 13px
    }

    .chat-container {
      overflow: hidden
    }

    .chat-messages {
      max-height: 320px;
      overflow-y: auto;
      padding: 14px;
      display: flex;
      flex-direction: column;
      gap: 11px
    }

    .message {
      display: flex;
      gap: 10px;
      align-items: flex-start
    }

    .message.user-message {
      flex-direction: row-reverse
    }

    .message-icon {
      width: 32px;
      height: 32px;
      background: rgba(245, 158, 11, .15);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
      flex-shrink: 0;
      font-size: 13px
    }

    .message-content {
      background: var(--bg-input);
      padding: 10px 14px;
      border-radius: 11px;
      font-size: 13px;
      color: var(--text-primary);
      max-width: 80%;
      line-height: 1.55
    }

    .user-message .message-content {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: #fff
    }

    .chat-input {
      display: flex;
      gap: 9px;
      padding: 12px 14px;
      border-top: 1px solid var(--border)
    }

    .chat-input input {
      flex: 1;
      padding: 10px 13px;
      background: var(--bg-input);
      border: 1.5px solid var(--border);
      border-radius: 9px;
      color: var(--text-primary);
      font-family: 'DM Sans', sans-serif;
      font-size: 13px;
      outline: none;
      transition: border-color .2s
    }

    .chat-input input:focus {
      border-color: var(--primary)
    }

    .btn-send {
      padding: 10px 16px;
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: 9px;
      font-size: 13px;
      cursor: pointer;
      transition: background .2s
    }

    .btn-send:hover {
      background: var(--primary-dark)
    }

    .tips-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
      margin-top: 14px
    }

    .tip-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 11px;
      padding: 16px;
      text-align: center;
      transition: all .2s
    }

    .tip-card:hover {
      border-color: var(--primary);
      transform: translateY(-2px)
    }

    .tip-card i {
      font-size: 20px;
      color: var(--primary);
      margin-bottom: 9px;
      display: block
    }

    .tip-card h4 {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 5px
    }

    .tip-card p {
      font-size: 11px;
      color: var(--text-secondary);
      line-height: 1.5
    }

    /* ══════════════════════════════════════════
   RIGHT-SIDE CHAT PANEL (VSCode style)
══════════════════════════════════════════ */
    .chat-panel {
      width: var(--chatpanel-w);
      background: var(--chatpanel-bg);
      border-left: 1px solid var(--border);
      position: fixed;
      right: 0;
      top: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      z-index: 90;
      transition: transform .3s, background .3s;
    }

    .chat-panel.collapsed {
      transform: translateX(100%)
    }

    /* toggle tab on edge */
    .chat-toggle-tab {
      position: fixed;
      right: var(--chatpanel-w);
      top: 50%;
      transform: translateY(-50%);
      width: 22px;
      height: 70px;
      background: var(--chatpanel-bg);
      border: 1px solid var(--border);
      border-right: none;
      border-radius: 8px 0 0 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 91;
      transition: right .3s;
      color: var(--text-muted);
      font-size: 11px;
    }

    .chat-toggle-tab:hover {
      color: var(--primary)
    }

    .chat-panel.collapsed~.chat-toggle-tab {
      right: 0;
      border-radius: 8px 0 0 8px;
    }

    /* Chat panel header */
    .cp-header {
      padding: 0;
      background: var(--chatpanel-bg);
      border-bottom: 1px solid var(--border);
      display: flex;
      flex-direction: column;
    }

    .cp-title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 14px 0
    }

    .cp-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-family: 'Sora', sans-serif;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-primary)
    }

    .cp-title i {
      color: var(--primary)
    }

    .cp-actions {
      display: flex;
      gap: 4px
    }

    .cp-btn {
      padding: 5px 7px;
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      border-radius: 6px;
      font-size: 13px;
      transition: all .2s
    }

    .cp-btn:hover {
      background: var(--bg-hover);
      color: var(--text-primary)
    }

    .cp-btn.danger:hover {
      background: rgba(239, 68, 68, .1);
      color: #EF4444
    }

    /* Chat history tabs */
    .cp-tabs {
      display: flex;
      gap: 0;
      padding: 8px 10px 0;
      overflow-x: auto;
      border-bottom: 1px solid var(--border)
    }

    .cp-tab {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: transparent;
      border: 1px solid transparent;
      border-bottom: none;
      border-radius: 6px 6px 0 0;
      color: var(--text-muted);
      font-size: 11px;
      cursor: pointer;
      font-family: 'DM Sans', sans-serif;
      white-space: nowrap;
      flex-shrink: 0;
      transition: all .2s;
    }

    .cp-tab.active {
      background: var(--bg-input);
      color: var(--text-primary);
      border-color: var(--border)
    }

    .cp-tab:hover:not(.active) {
      color: var(--text-secondary);
      background: rgba(255, 255, 255, .04)
    }

    .cp-tab-close {
      font-size: 10px;
      color: var(--text-muted);
      padding: 1px 2px;
      border-radius: 3px
    }

    .cp-tab-close:hover {
      background: rgba(239, 68, 68, .2);
      color: #EF4444
    }

    .cp-new-tab {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 26px;
      height: 26px;
      border-radius: 6px;
      color: var(--text-muted);
      cursor: pointer;
      font-size: 14px;
      flex-shrink: 0;
      transition: all .2s;
      border: none;
      background: none
    }

    .cp-new-tab:hover {
      background: var(--bg-hover);
      color: var(--primary)
    }

    /* Messages area */
    .cp-messages {
      flex: 1;
      overflow-y: auto;
      padding: 14px 12px;
      display: flex;
      flex-direction: column;
      gap: 10px
    }

    .cp-msg {
      display: flex;
      gap: 8px;
      align-items: flex-start
    }

    .cp-msg.user {
      flex-direction: row-reverse
    }

    .cp-msg-av {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      flex-shrink: 0;
      color: #fff
    }

    .cp-msg-av.bot {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark))
    }

    .cp-msg-av.usr {
      background: linear-gradient(135deg, #6366F1, #8B5CF6)
    }

    .cp-msg-bubble {
      max-width: 85%;
      padding: 9px 12px;
      border-radius: 11px;
      font-size: 12px;
      line-height: 1.55;
      color: var(--text-primary);
      background: var(--bg-input)
    }

    .cp-msg.user .cp-msg-bubble {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: #fff;
      border-radius: 11px 11px 2px 11px
    }

    .cp-msg.bot .cp-msg-bubble {
      border-radius: 11px 11px 11px 2px
    }

    .cp-msg-time {
      font-size: 9px;
      color: var(--text-muted);
      margin-top: 3px;
      text-align: right
    }

    .cp-msg.bot .cp-msg-time {
      text-align: left
    }

    /* Typing indicator */
    .typing-dot {
      display: inline-flex;
      gap: 3px;
      align-items: center;
      padding: 9px 12px
    }

    .typing-dot span {
      width: 5px;
      height: 5px;
      background: var(--text-muted);
      border-radius: 50%;
      animation: bounce .8s infinite
    }

    .typing-dot span:nth-child(2) {
      animation-delay: .15s
    }

    .typing-dot span:nth-child(3) {
      animation-delay: .3s
    }

    @keyframes bounce {

      0%,
      80%,
      100% {
        transform: translateY(0)
      }

      40% {
        transform: translateY(-6px)
      }
    }

    /* Suggestions */
    .cp-suggestions {
      padding: 8px 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      border-top: 1px solid var(--border)
    }

    .cp-sug {
      padding: 4px 9px;
      background: var(--bg-input);
      border: 1px solid var(--border);
      border-radius: 14px;
      color: var(--text-secondary);
      font-size: 10px;
      cursor: pointer;
      transition: all .2s;
      font-family: 'DM Sans', sans-serif
    }

    .cp-sug:hover {
      border-color: var(--primary);
      color: var(--primary);
      background: rgba(245, 158, 11, .06)
    }

    /* Input */
    .cp-input-area {
      padding: 10px 12px;
      border-top: 1px solid var(--border);
      background: var(--chatpanel-bg)
    }

    .cp-input-row {
      display: flex;
      gap: 7px;
      align-items: flex-end
    }

    .cp-input-row textarea {
      flex: 1;
      padding: 9px 11px;
      background: var(--bg-input);
      border: 1.5px solid var(--border);
      border-radius: 9px;
      color: var(--text-primary);
      font-family: 'DM Sans', sans-serif;
      font-size: 12px;
      outline: none;
      resize: none;
      min-height: 36px;
      max-height: 100px;
      line-height: 1.5;
      transition: border-color .2s
    }

    .cp-input-row textarea:focus {
      border-color: var(--primary)
    }

    .cp-send {
      padding: 9px 11px;
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: 9px;
      cursor: pointer;
      font-size: 13px;
      transition: background .2s;
      flex-shrink: 0
    }

    .cp-send:hover {
      background: var(--primary-dark)
    }

    .cp-send:disabled {
      opacity: .4;
      cursor: not-allowed
    }

    .cp-mic,
    .btn-mic {
      padding: 9px 11px;
      background: var(--bg-input);
      color: var(--text-secondary);
      border: 1.5px solid var(--border);
      border-radius: 9px;
      cursor: pointer;
      font-size: 13px;
      transition: all .2s;
      flex-shrink: 0
    }

    .cp-mic:hover,
    .btn-mic:hover {
      background: var(--bg-hover);
      color: var(--primary);
      border-color: var(--primary)
    }

    .cp-mic.active,
    .btn-mic.active {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
      animation: pulse 1s infinite
    }

    .cp-input-hint {
      font-size: 10px;
      color: var(--text-muted);
      margin-top: 5px;
      text-align: center
    }

    /* ══════════════════════════════════════════
   PROFILE MODAL
══════════════════════════════════════════ */
    .profile-modal {
      background: var(--bg-surface);
      border-radius: 18px;
      width: 560px;
      max-width: 95vw;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 24px 70px rgba(0, 0, 0, .6);
      animation: slideUp .25s ease
    }

    .pm-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 22px 24px;
      border-bottom: 1px solid var(--border)
    }

    .pm-header h2 {
      font-family: 'Sora', sans-serif;
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary)
    }

    .pm-close {
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      font-size: 18px;
      padding: 4px;
      border-radius: 6px;
      transition: all .2s
    }

    .pm-close:hover {
      background: var(--bg-hover);
      color: var(--text-primary)
    }

    .pm-body {
      padding: 24px
    }

    .pm-avatar-section {
      display: flex;
      align-items: center;
      gap: 18px;
      margin-bottom: 24px;
      padding: 18px;
      background: var(--bg-input);
      border-radius: 13px;
      border: 1px solid var(--border)
    }

    .pm-av-big {
      width: 72px;
      height: 72px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 28px;
      font-weight: 700;
      position: relative;
      overflow: hidden;
      flex-shrink: 0
    }

    .pm-av-big img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 50%
    }

    .pm-av-overlay {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, .5);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity .2s;
      cursor: pointer
    }

    .pm-av-big:hover .pm-av-overlay {
      opacity: 1
    }

    .pm-av-overlay i {
      color: #fff;
      font-size: 16px
    }

    .pm-av-info h3 {
      font-family: 'Sora', sans-serif;
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 3px
    }

    .pm-av-info p {
      font-size: 12px;
      color: var(--text-secondary);
      margin-bottom: 10px
    }

    .btn-upload-pic {
      padding: 7px 14px;
      border: 1.5px solid var(--primary);
      border-radius: 8px;
      background: transparent;
      color: var(--primary);
      font-family: 'DM Sans', sans-serif;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all .2s
    }

    .btn-upload-pic:hover {
      background: rgba(245, 158, 11, .1)
    }

    .pm-section-title {
      font-family: 'Sora', sans-serif;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 12px;
      margin-top: 4px;
      padding-bottom: 6px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 7px
    }

    .pm-section-title i {
      color: var(--primary);
      font-size: 13px
    }

    .pm-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 13px;
      margin-bottom: 16px
    }

    .pm-grid.single {
      grid-template-columns: 1fr
    }

    .pm-field label {
      display: block;
      font-size: 11px;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 5px;
      text-transform: uppercase;
      letter-spacing: .4px
    }

    .pm-field input,
    .pm-field select,
    .pm-field textarea {
      width: 100%;
      padding: 9px 12px;
      background: var(--bg-input);
      border: 1.5px solid var(--border);
      border-radius: 9px;
      color: var(--text-primary);
      font-family: 'DM Sans', sans-serif;
      font-size: 13px;
      outline: none;
      transition: all .2s
    }

    .pm-field input:focus,
    .pm-field select:focus,
    .pm-field textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(245, 158, 11, .1)
    }

    .pm-field textarea {
      resize: vertical;
      min-height: 70px
    }

    .pm-field select option {
      background: var(--bg-card)
    }

    .pm-resume-zone {
      border: 2px dashed var(--border);
      border-radius: 10px;
      padding: 18px;
      text-align: center;
      cursor: pointer;
      transition: all .2s;
      background: var(--bg-input)
    }

    .pm-resume-zone:hover {
      border-color: var(--primary);
      background: rgba(245, 158, 11, .04)
    }

    .pm-resume-zone i {
      font-size: 22px;
      color: var(--primary);
      margin-bottom: 7px
    }

    .pm-resume-zone p {
      font-size: 13px;
      color: var(--text-secondary)
    }

    .pm-resume-zone span {
      font-size: 11px;
      color: var(--text-muted)
    }

    .pm-resume-name {
      font-size: 12px;
      color: var(--primary);
      font-weight: 600;
      margin-top: 7px;
      display: none
    }

    .pm-footer {
      padding: 16px 24px;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: flex-end;
      gap: 10px
    }

    .btn-cancel-pm {
      padding: 9px 18px;
      border: 1px solid var(--border);
      border-radius: 9px;
      background: transparent;
      color: var(--text-secondary);
      font-family: 'DM Sans', sans-serif;
      font-size: 13px;
      cursor: pointer;
      transition: all .2s
    }

    .btn-cancel-pm:hover {
      background: var(--bg-hover);
      color: var(--text-primary)
    }

    .btn-save-pm {
      padding: 9px 22px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: #fff;
      border: none;
      border-radius: 9px;
      font-family: 'Sora', sans-serif;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all .2s;
      box-shadow: 0 4px 15px rgba(245, 158, 11, .3)
    }

    .btn-save-pm:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 20px rgba(245, 158, 11, .45)
    }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: #22C55E;
      color: #fff;
      padding: 11px 20px;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
      z-index: 10000;
      transition: transform .3s;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, .3)
    }

    .toast.show {
      transform: translateX(-50%) translateY(0)
    }

    .toast.error {
      background: #EF4444
    }

    @media(max-width:900px) {
      .login-left {
        display: none
      }

      .login-right {
        width: 100%
      }

      .chat-panel {
        display: none
      }

      .main-content {
        margin-right: 0
      }

      .chat-toggle-tab {
        display: none
      }
    }
  </style>
</head>

<body>

  <!-- ════════════════════════════════════════
     LOGIN PAGE
════════════════════════════════════════ -->
  <div id="loginPage">
    <div style="min-height:100vh;display:flex">

      <!-- Left branding -->
      <div class="login-left">
        <div class="left-content">
          <div class="brand-logo">
            <div class="brand-icon"><i class="fas fa-brain"></i></div>
            <div class="brand-name">Lakshya<span>Setu</span> AI</div>
          </div>
          <h2>Your AI-Powered Career Intelligence Platform</h2>
          <p>Join thousands discovering their perfect career path with AI-driven insights and personalized roadmaps.</p>
          <div class="left-features">
            <div class="left-feature">
              <div class="left-feature-icon"><i class="fas fa-rocket"></i></div>
              <div class="left-feature-text">
                <strong>Smart Career Matching</strong>
                <span>AI matches you to roles based on your unique profile</span>
              </div>
            </div>
            <div class="left-feature">
              <div class="left-feature-icon"><i class="fas fa-chart-line"></i></div>
              <div class="left-feature-text">
                <strong>Skill Gap Analysis</strong>
                <span>Know exactly what to learn and when</span>
              </div>
            </div>
            <div class="left-feature">
              <div class="left-feature-icon"><i class="fas fa-route"></i></div>
              <div class="left-feature-text">
                <strong>Personalized Roadmaps</strong>
                <span>Step-by-step plans for every career goal</span>
              </div>
            </div>
          </div>
          <div class="left-stats">
            <div class="left-stat">
              <div class="left-stat-num">50+</div>
              <div class="left-stat-label">Career Paths</div>
            </div>
            <div class="left-stat">
              <div class="left-stat-num">20+</div>
              <div class="left-stat-label">Exams</div>
            </div>
            <div class="left-stat">
              <div class="left-stat-num">100+</div>
              <div class="left-stat-label">Courses</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right form panel -->
      <div class="login-right">
        <div class="login-controls">
          <button class="ctrl-btn" onclick="toggleTheme()" id="themeBtn"><i class="fas fa-moon" id="themeIconL"></i>
            <span id="themeTextL">Light</span></button>
          <button class="ctrl-btn active" id="clrNavy" onclick="setColor('navy')">⚓ Navy</button>
          <button class="ctrl-btn" id="clrGreen" onclick="setColor('green')">🌿 Green</button>
        </div>

        <div class="login-form-box">
          <div class="form-header">
            <h1 id="formTitle">Welcome back 👋</h1>
            <p id="formSubtitle">Sign in to your LakshyaSetu AI account</p>
          </div>

          <div class="auth-tabs">
            <button class="auth-tab active" id="tabL" onclick="switchTab('login')">Login</button>
            <button class="auth-tab" id="tabS" onclick="switchTab('signup')">Sign Up</button>
          </div>

          <!-- LOGIN -->
          <div id="loginPanel">
            <div class="social-buttons">
              <button class="social-btn" onclick="openGooglePicker()">
                <svg width="17" height="17" viewBox="0 0 24 24">
                  <path fill="#4285F4"
                    d="M23.745 12.27c0-.79-.07-1.54-.19-2.27h-11.3v4.51h6.47c-.29 1.48-1.14 2.73-2.4 3.58v3h3.86c2.26-2.09 3.56-5.17 3.56-8.82z" />
                  <path fill="#34A853"
                    d="M12.255 24c3.24 0 5.95-1.08 7.93-2.91l-3.86-3c-1.08.72-2.45 1.16-4.07 1.16-3.13 0-5.78-2.11-6.73-4.96h-3.98v3.09C3.515 21.3 7.615 24 12.255 24z" />
                  <path fill="#FBBC05"
                    d="M5.525 14.29c-.25-.72-.38-1.49-.38-2.29s.14-1.57.38-2.29V6.62h-3.98a11.86 11.86 0 000 10.76l3.98-3.09z" />
                  <path fill="#EA4335"
                    d="M12.255 4.75c1.77 0 3.35.61 4.6 1.8l3.42-3.42C18.205 1.19 15.495 0 12.255 0c-4.64 0-8.74 2.7-10.71 6.62l3.98 3.09c.95-2.85 3.6-4.96 6.73-4.96z" />
                </svg>
                Continue with Google
              </button>
              <button class="social-btn" onclick="openLinkedInModal()">
                <i class="fab fa-linkedin" style="color:#0A66C2;font-size:17px"></i> LinkedIn
              </button>
            </div>
            <div class="divider">or sign in with email</div>
            <form onsubmit="handleLogin(event)">
              <div class="field-group">
                <label>Email Address</label>
                <div class="field-wrap">
                  <i class="fas fa-envelope fi"></i>
                  <input type="email" id="lEmail" placeholder="you@example.com" required>
                </div>
              </div>
              <div class="field-group">
                <label>Password</label>
                <div class="field-wrap">
                  <i class="fas fa-lock fi"></i>
                  <input type="password" id="lPass" placeholder="Your password" required>
                  <button type="button" class="eye-btn" onclick="togglePw('lPass',this)"><i
                      class="fas fa-eye"></i></button>
                </div>
              </div>
              <div class="form-options">
                <label class="cb-label"><input type="checkbox" id="remember"> Remember me</label>
                <a href="#" class="forgot-link" onclick="showForgot(event)">Forgot password?</a>
              </div>
              <button type="submit" class="btn-submit"><i class="fas fa-sign-in-alt"></i> Sign In</button>
            </form>
            <div class="switch-text">No account? <a href="#" onclick="switchTab('signup')">Sign up free →</a></div>
          </div>

          <!-- SIGNUP -->
          <div id="signupPanel" style="display:none">
            <div class="social-buttons">
              <button class="social-btn" onclick="openGooglePicker()">
                <svg width="17" height="17" viewBox="0 0 24 24">
                  <path fill="#4285F4"
                    d="M23.745 12.27c0-.79-.07-1.54-.19-2.27h-11.3v4.51h6.47c-.29 1.48-1.14 2.73-2.4 3.58v3h3.86c2.26-2.09 3.56-5.17 3.56-8.82z" />
                  <path fill="#34A853"
                    d="M12.255 24c3.24 0 5.95-1.08 7.93-2.91l-3.86-3c-1.08.72-2.45 1.16-4.07 1.16-3.13 0-5.78-2.11-6.73-4.96h-3.98v3.09C3.515 21.3 7.615 24 12.255 24z" />
                  <path fill="#FBBC05"
                    d="M5.525 14.29c-.25-.72-.38-1.49-.38-2.29s.14-1.57.38-2.29V6.62h-3.98a11.86 11.86 0 000 10.76l3.98-3.09z" />
                  <path fill="#EA4335"
                    d="M12.255 4.75c1.77 0 3.35.61 4.6 1.8l3.42-3.42C18.205 1.19 15.495 0 12.255 0c-4.64 0-8.74 2.7-10.71 6.62l3.98 3.09c.95-2.85 3.6-4.96 6.73-4.96z" />
                </svg>
                Sign up with Google
              </button>
              <button class="social-btn" onclick="openLinkedInModal()">
                <i class="fab fa-linkedin" style="color:#0A66C2;font-size:17px"></i> LinkedIn
              </button>
            </div>
            <div class="divider">or create account with email</div>
            <form onsubmit="handleSignup(event)">
              <div class="field-row">
                <div class="field-group">
                  <label>First Name</label>
                  <div class="field-wrap">
                    <i class="fas fa-user fi"></i>
                    <input type="text" id="sFirst" placeholder="Rahul" required>
                  </div>
                </div>
                <div class="field-group">
                  <label>Last Name</label>
                  <div class="field-wrap">
                    <i class="fas fa-user fi"></i>
                    <input type="text" id="sLast" placeholder="Sharma" required>
                  </div>
                </div>
              </div>
              <div class="field-group">
                <label>Email Address</label>
                <div class="field-wrap">
                  <i class="fas fa-envelope fi"></i>
                  <input type="email" id="sEmail" placeholder="you@example.com" required>
                </div>
              </div>
              <div class="field-group">
                <label>Phone Number <span
                    style="color:var(--text-muted);font-size:10px;text-transform:none">(optional)</span></label>
                <div class="field-wrap">
                  <i class="fas fa-phone fi"></i>
                  <input type="tel" id="sPhone" placeholder="+91 98765 43210">
                </div>
              </div>
              <div class="field-group">
                <label>State / Location</label>
                <div class="field-wrap">
                  <i class="fas fa-map-marker-alt fi"></i>
                  <input type="text" id="sState" placeholder="e.g. Karnataka, India">
                </div>
              </div>
              <div class="field-group">
                <label>Highest Qualification</label>
                <div class="field-wrap">
                  <i class="fas fa-graduation-cap fi"></i>
                  <select id="sQual">
                    <option value="">Select qualification</option>
                    <option>Class 10 (SSC/CBSE)</option>
                    <option>Class 12 (HSC/CBSE)</option>
                    <option>Diploma</option>
                    <option>Bachelor's Degree</option>
                    <option>Master's Degree</option>
                    <option>PhD / Doctorate</option>
                  </select>
                </div>
              </div>
              <div class="field-group">
                <label>Password</label>
                <div class="field-wrap">
                  <i class="fas fa-lock fi"></i>
                  <input type="password" id="sPass" placeholder="Create a strong password" required
                    oninput="checkStrength(this.value)">
                  <button type="button" class="eye-btn" onclick="togglePw('sPass',this)"><i
                      class="fas fa-eye"></i></button>
                </div>
                <div class="strength-bar">
                  <div class="strength-seg" id="ss1"></div>
                  <div class="strength-seg" id="ss2"></div>
                  <div class="strength-seg" id="ss3"></div>
                  <div class="strength-seg" id="ss4"></div>
                </div>
                <div class="strength-label" id="strLabel">Enter a password</div>
              </div>
              <div class="field-group">
                <label>Confirm Password</label>
                <div class="field-wrap">
                  <i class="fas fa-lock fi"></i>
                  <input type="password" id="sConfirm" placeholder="Repeat password" required>
                  <button type="button" class="eye-btn" onclick="togglePw('sConfirm',this)"><i
                      class="fas fa-eye"></i></button>
                </div>
              </div>

              <!-- Resume upload -->
              <div class="field-group">
                <label>Upload Resume <span style="color:var(--text-muted);font-size:10px;text-transform:none">(optional,
                    PDF/DOC)</span></label>
                <div class="upload-area" onclick="document.getElementById('resumeFile').click()" id="uploadArea"
                  ondragover="event.preventDefault();this.classList.add('dragging')"
                  ondragleave="this.classList.remove('dragging')" ondrop="handleResumeDrop(event)">
                  <i class="fas fa-cloud-upload-alt"></i>
                  <p>Drag & drop your resume here</p>
                  <span>or click to browse — PDF, DOC, DOCX (max 5MB)</span>
                  <div class="file-name" id="resumeFileName"></div>
                </div>
                <input type="file" id="resumeFile" accept=".pdf,.doc,.docx" style="display:none"
                  onchange="handleResumeSelect(this)">
              </div>

              <button type="submit" class="btn-submit"><i class="fas fa-user-plus"></i> Create Free Account</button>
            </form>
            <p class="terms-text">By signing up you agree to our <a href="#">Terms</a> & <a href="#">Privacy Policy</a>
            </p>
            <div class="switch-text">Have an account? <a href="#" onclick="switchTab('login')">Login →</a></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ════ GOOGLE ACCOUNT PICKER MODAL ════ -->
  <div class="modal-overlay" id="googleModal">
    <div class="google-picker">
      <div class="gp-header">
        <div class="gp-logo"><i class="fab fa-google"></i></div>
        <h3>Sign in with Google</h3>
        <p>Choose an account to continue to LakshyaSetu AI</p>
      </div>
      <div class="gp-accounts" id="gpAccounts">
        <div class="gp-account" onclick="selectGoogleAccount('Rahul Sharma','rahul.sharma@gmail.com','RS','#4285F4')">
          <div class="gp-avatar" style="background:#4285F4">RS</div>
          <div class="gp-account-info">
            <div class="gp-account-name">Rahul Sharma</div>
            <div class="gp-account-email">rahul.sharma@gmail.com</div>
          </div>
          <i class="fas fa-chevron-right gp-account-check"></i>
        </div>
        <div class="gp-account" onclick="selectGoogleAccount('Priya Patel','priya.patel@gmail.com','PP','#34A853')">
          <div class="gp-avatar" style="background:#34A853">PP</div>
          <div class="gp-account-info">
            <div class="gp-account-name">Priya Patel</div>
            <div class="gp-account-email">priya.patel@gmail.com</div>
          </div>
          <i class="fas fa-chevron-right gp-account-check"></i>
        </div>
        <div class="gp-divider"></div>
        <div class="gp-add" onclick="addGoogleAccount()">
          <div class="gp-add-icon"><i class="fas fa-plus"></i></div>
          <span>Use another account</span>
        </div>
      </div>
      <div class="gp-footer">
        <button class="gp-cancel" onclick="closeModal('googleModal')">Cancel</button>
      </div>
    </div>
  </div>

  <!-- ════ LINKEDIN MODAL ════ -->
  <div class="modal-overlay" id="linkedinModal">
    <div class="linkedin-modal">
      <div class="lm-header">
        <div class="lm-logo"><i class="fab fa-linkedin-in"></i></div>
        <div>
          <h3>Sign in with LinkedIn</h3>
          <p>Enter your LinkedIn profile URL or email</p>
        </div>
      </div>
      <div class="field-group">
        <label>LinkedIn Profile URL</label>
        <div class="field-wrap">
          <i class="fab fa-linkedin fi"></i>
          <input type="url" id="liUrl" placeholder="https://linkedin.com/in/your-profile">
        </div>
      </div>
      <div class="divider">or</div>
      <div class="field-group">
        <label>LinkedIn Email</label>
        <div class="field-wrap">
          <i class="fas fa-envelope fi"></i>
          <input type="email" id="liEmail" placeholder="your@email.com">
        </div>
      </div>
      <div class="field-group">
        <label>Password</label>
        <div class="field-wrap">
          <i class="fas fa-lock fi"></i>
          <input type="password" id="liPass" placeholder="LinkedIn password">
          <button type="button" class="eye-btn" onclick="togglePw('liPass',this)"><i class="fas fa-eye"></i></button>
        </div>
      </div>
      <button class="btn-submit" onclick="handleLinkedIn()" style="margin-top:4px">
        <i class="fab fa-linkedin"></i> Sign in with LinkedIn
      </button>
      <div class="gp-footer" style="border:none;padding:12px 0 0">
        <button class="gp-cancel" onclick="closeModal('linkedinModal')">Cancel</button>
      </div>
    </div>
  </div>

  <!-- ════ FORGOT PASSWORD MODAL ════ -->
  <div class="modal-overlay" id="forgotModal">
    <div class="linkedin-modal">
      <div class="lm-header">
        <div class="lm-logo" style="background:var(--primary)"><i class="fas fa-key"></i></div>
        <div>
          <h3>Reset Password</h3>
          <p>We'll send a reset link to your email</p>
        </div>
      </div>
      <div class="field-group">
        <label>Email Address</label>
        <div class="field-wrap">
          <i class="fas fa-envelope fi"></i>
          <input type="email" id="forgotEmail" placeholder="you@example.com">
        </div>
      </div>
      <button class="btn-submit" onclick="sendReset()"><i class="fas fa-paper-plane"></i> Send Reset Link</button>
      <div class="gp-footer" style="border:none;padding:12px 0 0">
        <button class="gp-cancel" onclick="closeModal('forgotModal')">Cancel</button>
      </div>
    </div>
  </div>

  <!-- ════ PROFILE MODAL ════ -->
  <div class="modal-overlay" id="profileModal">
    <div class="profile-modal">
      <div class="pm-header">
        <h2><i class="fas fa-user-circle" style="color:var(--primary);margin-right:8px"></i>Edit Profile</h2>
        <button class="pm-close" onclick="closeModal('profileModal')"><i class="fas fa-times"></i></button>
      </div>
      <div class="pm-body">
        <!-- Avatar -->
        <div class="pm-avatar-section">
          <div class="pm-av-big" id="pmAvBig">
            <span id="pmAvInitials">?</span>
            <img id="pmAvImg" src="" style="display:none">
            <div class="pm-av-overlay" onclick="document.getElementById('avatarFile').click()">
              <i class="fas fa-camera"></i>
            </div>
          </div>
          <div class="pm-av-info">
            <h3 id="pmAvName">Your Name</h3>
            <p id="pmAvEmail">your@email.com</p>
            <button class="btn-upload-pic" onclick="document.getElementById('avatarFile').click()"><i
                class="fas fa-camera"></i> Change Photo</button>
          </div>
          <input type="file" id="avatarFile" accept="image/*" style="display:none" onchange="handleAvatarChange(this)">
        </div>

        <!-- Personal Info -->
        <div class="pm-section-title"><i class="fas fa-user"></i> Personal Information</div>
        <div class="pm-grid">
          <div class="pm-field"><label>First Name</label><input type="text" id="pmFirst" placeholder="First name"></div>
          <div class="pm-field"><label>Last Name</label><input type="text" id="pmLast" placeholder="Last name"></div>
          <div class="pm-field"><label>Email</label><input type="email" id="pmEmail" placeholder="Email"></div>
          <div class="pm-field"><label>Phone</label><input type="tel" id="pmPhone" placeholder="+91 ..."></div>
          <div class="pm-field"><label>Date of Birth</label><input type="date" id="pmDob"></div>
          <div class="pm-field"><label>Gender</label>
            <select id="pmGender">
              <option value="">Select</option>
              <option>Male</option>
              <option>Female</option>
              <option>Non-binary</option>
              <option>Prefer not to say</option>
            </select>
          </div>
        </div>
        <div class="pm-grid single">
          <div class="pm-field"><label>Bio / About Me</label><textarea id="pmBio"
              placeholder="Tell us about yourself..."></textarea></div>
        </div>

        <!-- Location & Education -->
        <div class="pm-section-title"><i class="fas fa-map-marker-alt"></i> Location & Education</div>
        <div class="pm-grid">
          <div class="pm-field"><label>City</label><input type="text" id="pmCity" placeholder="e.g. Bengaluru"></div>
          <div class="pm-field"><label>State</label><input type="text" id="pmState" placeholder="e.g. Karnataka"></div>
          <div class="pm-field"><label>Qualification</label>
            <select id="pmQual">
              <option value="">Select</option>
              <option>Class 10</option>
              <option>Class 12</option>
              <option>Diploma</option>
              <option>Bachelor's Degree</option>
              <option>Master's Degree</option>
              <option>PhD</option>
            </select>
          </div>
          <div class="pm-field"><label>Field of Study</label><input type="text" id="pmField"
              placeholder="e.g. Computer Science"></div>
          <div class="pm-field"><label>College / University</label><input type="text" id="pmCollege"
              placeholder="Your institution"></div>
          <div class="pm-field"><label>Graduation Year</label><input type="number" id="pmGradYear" placeholder="2024"
              min="1990" max="2030"></div>
        </div>

        <!-- Career Info -->
        <div class="pm-section-title"><i class="fas fa-briefcase"></i> Career Information</div>
        <div class="pm-grid">
          <div class="pm-field"><label>Current Status</label>
            <select id="pmStatus">
              <option value="">Select</option>
              <option>Student</option>
              <option>Fresher (Job Seeking)</option>
              <option>Working Professional</option>
              <option>Freelancer</option>
              <option>Entrepreneur</option>
            </select>
          </div>
          <div class="pm-field"><label>Target Role</label><input type="text" id="pmTargetRole"
              placeholder="e.g. Data Scientist"></div>
          <div class="pm-field"><label>Current Skills</label><input type="text" id="pmSkills"
              placeholder="Python, Excel, ..."></div>
          <div class="pm-field"><label>Years of Experience</label>
            <select id="pmExp">
              <option value="">Select</option>
              <option>0 (Student/Fresher)</option>
              <option>0-1 years</option>
              <option>1-3 years</option>
              <option>3-5 years</option>
              <option>5+ years</option>
            </select>
          </div>
          <div class="pm-field"><label>LinkedIn URL</label><input type="url" id="pmLinkedIn"
              placeholder="linkedin.com/in/..."></div>
          <div class="pm-field"><label>Portfolio / GitHub</label><input type="url" id="pmPortfolio"
              placeholder="github.com/..."></div>
        </div>

        <!-- Resume -->
        <div class="pm-section-title"><i class="fas fa-file-alt"></i> Resume</div>
        <div class="pm-resume-zone" onclick="document.getElementById('pmResumeFile').click()"
          ondragover="event.preventDefault();this.style.borderColor='var(--primary)'"
          ondragleave="this.style.borderColor='var(--border)'" ondrop="handlePmResumeDrop(event)">
          <i class="fas fa-cloud-upload-alt"></i>
          <p>Drag & drop or click to upload resume</p>
          <span>PDF, DOC, DOCX — max 5MB</span>
          <div class="pm-resume-name" id="pmResumeName"></div>
        </div>
        <input type="file" id="pmResumeFile" accept=".pdf,.doc,.docx" style="display:none"
          onchange="handlePmResumeSelect(this)">
      </div>
      <div class="pm-footer">
        <button class="btn-cancel-pm" onclick="closeModal('profileModal')">Cancel</button>
        <button class="btn-save-pm" onclick="saveProfile()"><i class="fas fa-save"></i> Save Profile</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"><i class="fas fa-check-circle"></i> <span id="toastMsg">Saved!</span></div>

  <!-- ════════════════════════════════════════
     MAIN APP
════════════════════════════════════════ -->
  <div id="mainApp" style="display:none">

    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-logo" onclick="goSection('home')">
        <div class="slogo-icon"><i class="fas fa-brain"></i></div>
        <span class="slogo-text">LakshyaSetu AI</span>
      </div>
      <nav class="nav-menu">
        <div class="nav-item active" data-s="home" onclick="goSection('home')"><i
            class="fas fa-home"></i><span>Home</span></div>
        <div class="nav-item" data-s="career-match" onclick="goSection('career-match')"><i
            class="fas fa-briefcase"></i><span>Career Match</span></div>
        <div class="nav-item" data-s="skill-gap" onclick="goSection('skill-gap')"><i
            class="fas fa-chart-line"></i><span>Skill Gap</span></div>
        <div class="nav-item" data-s="exams" onclick="goSection('exams')"><i class="fas fa-book-open"></i><span>Exam
            Pathways</span></div>
        <div class="nav-item" data-s="roadmap" onclick="goSection('roadmap')"><i class="fas fa-route"></i><span>Learning
            Roadmap</span></div>
        <div class="nav-item" data-s="interview" onclick="goSection('interview')"><i
            class="fas fa-user-tie"></i><span>Interview Prep</span></div>
        <div class="nav-item" data-s="mentor" onclick="goSection('mentor')"><i class="fas fa-heart"></i><span>Mentor
            Support</span></div>
      </nav>
      <div class="sidebar-bottom">
        <div class="sidebar-ctrl-row">
          <button class="sb-ctrl" onclick="toggleTheme()" id="sbThemeBtn"><i class="fas fa-moon" id="sbThemeIcon"></i>
            <span id="sbThemeText">Light</span></button>
          <button class="sb-ctrl on" id="sbNavy" onclick="setColor('navy')">⚓ Navy</button>
          <button class="sb-ctrl" id="sbGreen" onclick="setColor('green')">🌿 Green</button>
        </div>
        <div class="user-card" onclick="openProfile()">
          <div class="user-av" id="sidebarAv"><span id="sidebarAvText">?</span><img id="sidebarAvImg" src=""
              style="display:none"></div>
          <div class="user-details">
            <span class="user-name-txt" id="sidebarName">Loading...</span>
            <span class="user-status-txt" id="sidebarStatus">Career Explorer</span>
          </div>
          <i class="fas fa-pen edit-icon"></i>
        </div>
      </div>
    </aside>

    <!-- Main content -->
    <main class="main-content">

      <!-- HOME -->
      <section id="home" class="content-section active">
        <div class="hero-section">
          <h1>Welcome to <span class="highlight">LakshyaSetu AI</span></h1>
          <p>Your AI-Powered Career Intelligence and Exam Guidance Platform</p>
          <div class="hero-stats">
            <div class="stat-card"><span class="stat-number">50+</span><span class="stat-label">Career Paths</span>
            </div>
            <div class="stat-card"><span class="stat-number">20+</span><span class="stat-label">Exams Covered</span>
            </div>
            <div class="stat-card"><span class="stat-number">100+</span><span class="stat-label">Courses</span></div>
          </div>
        </div>
        <div class="quick-actions">
          <h2>How Can We Help You Today?</h2>
          <div class="action-grid">
            <div class="action-card" onclick="goSection('career-match')">
              <div class="action-icon"><i class="fas fa-search"></i></div>
              <h3>Find My Career Path</h3>
              <p>Match skills & interests to perfect roles</p>
            </div>
            <div class="action-card" onclick="goSection('skill-gap')">
              <div class="action-icon"><i class="fas fa-list-check"></i></div>
              <h3>Analyze Skill Gaps</h3>
              <p>Identify missing skills & get readiness score</p>
            </div>
            <div class="action-card" onclick="goSection('exams')">
              <div class="action-icon"><i class="fas fa-clipboard-list"></i></div>
              <h3>Explore Exams</h3>
              <p>Find government & entrance exam pathways</p>
            </div>
            <div class="action-card" onclick="goSection('interview')">
              <div class="action-icon"><i class="fas fa-comments"></i></div>
              <h3>Interview Prep</h3>
              <p>Practice questions and expert tips</p>
            </div>
          </div>
        </div>
        <div class="banner">
          <div class="banner-icon"><i class="fas fa-heart"></i></div>
          <div class="banner-content">
            <h3>Feeling overwhelmed about your career?</h3>
            <p>Our AI mentor is here to support you through any confusion or stress.</p>
          </div>
          <button class="banner-btn" onclick="goSection('mentor')">Talk to Mentor</button>
        </div>
      </section>

      <!-- CAREER MATCH -->
      <section id="career-match" class="content-section">
        <div class="section-header">
          <h1>Career Role Matching Engine</h1>
          <p>Find the perfect career path based on your skills and interests</p>
        </div>
        <div class="input-card glass-card">
          <h2><i class="fas fa-sliders-h"></i> Your Profile</h2>
          <div class="form-group"><label>Your Skills (comma separated)</label><input type="text" id="userSkills"
              placeholder="e.g., Python, Communication, Data Analysis"></div>
          <div class="form-row">
            <div class="form-group"><label>Education Level</label><select id="eduLevel">
                <option value="">Select</option>
                <option>Class 12</option>
                <option>Diploma</option>
                <option>Bachelor's</option>
                <option>Master's</option>
                <option>PhD</option>
              </select></div>
            <div class="form-group"><label>Qualified</label><select id="qualifiedLevel">
                <option value="">Select</option>
                <option value="yes">Yes</option>
                <option value="no">No</option>
              </select></div>
          </div>
          <div class="form-row">
            <div class="form-group"><label>Target Career</label><select id="targetCareer">
                <option value="">All Careers</option>
                <option>Private Sector Jobs</option>
                <option>Sales & Support Jobs</option>
                <option>Skill-Based Jobs</option>
                <option>Government Jobs</option>
                <option>Self-Employment</option>
              </select></div>
            <div class="form-group"><label>Preferred Sector</label><select id="prefSector">
                <option value="">All Sectors</option>
                <option>Technology</option>
                <option>Marketing</option>
                <option>Finance</option>
                <option>Engineering</option>
                <option>Design</option>
                <option>Business</option>
                <option>Healthcare</option>
                <option>Government</option>
              </select></div>
          </div>
          <button class="btn-primary" onclick="matchCareers()"><i class="fas fa-search"></i> Find Matching
            Careers</button>
        </div>
        <div id="careerResults" class="results-container"></div>
      </section>

      <!-- SKILL GAP -->
      <section id="skill-gap" class="content-section">
        <div class="section-header">
          <h1>Skill Gap & Readiness Engine</h1>
          <p>Analyze your readiness for your target role</p>
        </div>
        <div class="input-card glass-card">
          <h2><i class="fas fa-bullseye"></i> Target Role Analysis</h2>
          <div class="form-row">
            <div class="form-group"><label>Target Role</label><select id="targetRole">
                <option value="">Select Role</option>
                <option>Software Developer</option>
                <option>Data Scientist</option>
                <option>Business Analyst</option>
                <option>Product Manager</option>
                <option>UX Designer</option>
                <option>IAS Officer</option>
              </select></div>
            <div class="form-group"><label>Current Skills (comma separated)</label><input type="text" id="currentSkills"
                placeholder="e.g., Python, Excel"></div>
          </div>
          <button class="btn-primary" onclick="analyzeSkillGap()"><i class="fas fa-chart-pie"></i> Analyze Skill
            Gap</button>
        </div>
        <div id="skillGapResults" class="results-container"></div>
      </section>

      <!-- EXAMS -->
      <section id="exams" class="content-section">
        <div class="section-header">
          <h1>Exam Guidance Engine</h1>
          <p>Find the right exam for your career goals</p>
        </div>
        <div class="input-card glass-card">
          <h2><i class="fas fa-filter"></i> Filter Exams</h2>
          <div class="form-row">
            <div class="form-group"><label>Education Level</label><select id="examEdu">
                <option value="">All Levels</option>
                <option>Class 12</option>
                <option>Bachelor's</option>
                <option>Master's</option>
              </select></div>
            <div class="form-group"><label>Qualified</label><select id="examQualified">
                <option value="">Select</option>
                <option value="yes">Yes</option>
                <option value="no">No</option>
              </select></div>
            <div class="form-group"><label>Exam Type</label><select id="examType">
                <option value="">All Types</option>
                <option>Engineering Entrance</option>
                <option>Medical Entrance</option>
                <option>Government Services</option>
                <option>Management Entrance</option>
                <option>Banking</option>
                <option>Defense Services</option>
              </select></div>
            <div class="form-group"><label>Target Career</label><select id="examCareer">
                <option value="">All Careers</option>
                <option>Software Developer</option>
                <option>Doctor</option>
                <option>IAS Officer</option>
                <option>Business Analyst</option>
                <option>Bank PO</option>
                <option>Private Sector Jobs</option>
                <option>Sales & Support Jobs</option>
                <option>Skill-Based Jobs</option>
                <option>Government Jobs</option>
                <option>Self-Employment</option>
              </select></div>
          </div>
          <button class="btn-primary" onclick="filterExams()"><i class="fas fa-search"></i> Find Exams</button>
        </div>
        <div id="examResults" class="results-container"></div>
      </section>

      <!-- ROADMAP -->
      <section id="roadmap" class="content-section">
        <div class="section-header">
          <h1>Learning Roadmap Generator</h1>
          <p>Get a structured 3-stage learning path for your target role</p>
        </div>
        <div class="input-card glass-card">
          <h2><i class="fas fa-map"></i> Generate Your Roadmap</h2>
          <div class="form-row">
            <div class="form-group"><label>Target Role</label><select id="roadmapRole">
                <option value="">Select Role</option>
                <option>Software Developer</option>
                <option>Data Scientist</option>
                <option>Business Analyst</option>
                <option>Product Manager</option>
              </select></div>
            <div class="form-group"><label>Current Level</label><select id="currentLevel">
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="advanced">Advanced</option>
              </select></div>
          </div>
          <button class="btn-primary" onclick="generateRoadmap()"><i class="fas fa-route"></i> Generate Roadmap</button>
        </div>
        <div id="roadmapResults" class="results-container"></div>
      </section>

      <!-- INTERVIEW -->
      <section id="interview" class="content-section">
        <div class="section-header">
          <h1>Interview Preparation</h1>
          <p>Prepare for your next interview with curated practice questions</p>
        </div>
        <div class="input-card glass-card">
          <h2><i class="fas fa-user-tie"></i> Interview Setup</h2>
          <div class="form-row">
            <div class="form-group"><label>Target Role</label><select id="interviewRole">
                <option value="">Select Role</option>
                <option>Software Developer</option>
                <option>Data Scientist</option>
                <option>Business Analyst</option>
                <option>Product Manager</option>
              </select></div>
            <div class="form-group"><label>Experience Level</label><select id="expLevel">
                <option value="fresher">Fresher (0-2 yrs)</option>
                <option value="mid">Mid-Level (2-5 yrs)</option>
                <option value="senior">Senior (5+ yrs)</option>
              </select></div>
          </div>
          <button class="btn-primary" onclick="prepareInterview()"><i class="fas fa-clipboard-check"></i> Get
            Questions</button>
        </div>
        <div id="interviewResults" class="results-container"></div>
      </section>

      <!-- MENTOR -->
      <section id="mentor" class="content-section">
        <div class="section-header">
          <h1>Professional Mentor Support</h1>
          <p>We're here to support you through any challenges</p>
        </div>
        <div class="mentor-intro glass-card">
          <div class="mentor-avatar"><i class="fas fa-robot"></i></div>
          <div class="mentor-info">
            <h2>AI Career Mentor</h2>
            <p>I'm here to help you navigate career challenges, build confidence, and stay motivated. Share your
              thoughts with me.</p>
          </div>
        </div>
        <div class="emotion-selector">
          <h3>How are you feeling today?</h3>
          <div class="emotion-buttons">
            <button class="emotion-btn" data-emotion="confused" onclick="selectEmotion(this)"><i
                class="fas fa-question-circle"></i><span>Confused</span></button>
            <button class="emotion-btn" data-emotion="stressed" onclick="selectEmotion(this)"><i
                class="fas fa-tired"></i><span>Stressed</span></button>
            <button class="emotion-btn" data-emotion="demotivated" onclick="selectEmotion(this)"><i
                class="fas fa-arrow-down"></i><span>Demotivated</span></button>
            <button class="emotion-btn" data-emotion="overwhelmed" onclick="selectEmotion(this)"><i
                class="fas fa-brain"></i><span>Overwhelmed</span></button>
            <button class="emotion-btn" data-emotion="anxious" onclick="selectEmotion(this)"><i
                class="fas fa-exclamation-circle"></i><span>Anxious</span></button>
            <button class="emotion-btn" data-emotion="confident" onclick="selectEmotion(this)"><i
                class="fas fa-star"></i><span>Confident</span></button>
          </div>
        </div>
        <div class="chat-container glass-card">
          <div class="chat-messages" id="mentorMessages">
            <div class="message">
              <div class="message-icon"><i class="fas fa-robot"></i></div>
              <div class="message-content">Hello! I'm your AI Career Mentor. I'm here to listen and help. How are you
                feeling today?</div>
            </div>
          </div>
          <div class="chat-input">
            <input type="text" id="mentorInput" placeholder="Share your thoughts..."
              onkeypress="if(event.key==='Enter')sendMentorMsg()">
            <button class="btn-mic" id="mentorMicBtn" onclick="toggleMentorMicrophone()" title="Voice Input"><i
                class="fas fa-microphone"></i></button>
            <button class="btn-send" onclick="sendMentorMsg()"><i class="fas fa-paper-plane"></i></button>
          </div>
        </div>
        <div style="margin-top:20px">
          <div class="pm-section-title"><i class="fas fa-lightbulb"></i> Quick Action Steps</div>
          <div class="tips-grid">
            <div class="tip-card" onclick="createPlan()"><i class="fas fa-calendar-check"></i>
              <h4>Create a Plan</h4>
              <p>Break goals into manageable tasks</p>
            </div>
            <div class="tip-card" onclick="celebrateWins()"><i class="fas fa-medal"></i>
              <h4>Celebrate Wins</h4>
              <p>Acknowledge every small achievement</p>
            </div>
            <div class="tip-card" onclick="seekSupport()"><i class="fas fa-users"></i>
              <h4>Seek Support</h4>
              <p>Connect with mentors and peers</p>
            </div>
            <div class="tip-card" onclick="stayBalanced()"><i class="fas fa-balance-scale"></i>
              <h4>Stay Balanced</h4>
              <p>Take breaks and maintain wellness</p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- ════ RIGHT CHAT PANEL (VSCode style) ════ -->
    <div class="chat-panel" id="chatPanel">
      <div class="cp-header">
        <div class="cp-title-row">
          <div class="cp-title"><i class="fas fa-robot"></i> AI Assistant</div>
          <div class="cp-actions">
            <button class="cp-btn" onclick="newChat()" title="New Chat"><i class="fas fa-plus"></i></button>
            <button class="cp-btn" onclick="clearCurrentChat()" title="Clear chat"><i
                class="fas fa-trash-alt"></i></button>
            <button class="cp-btn danger" onclick="toggleChatPanel()" title="Close panel"><i
                class="fas fa-chevron-right"></i></button>
          </div>
        </div>
        <!-- Chat history tabs -->
        <div class="cp-tabs" id="cpTabs">
          <!-- populated by JS -->
        </div>
      </div>
      <div class="cp-messages" id="cpMessages"></div>
      <div class="cp-suggestions" id="cpSuggestions">
        <button class="cp-sug" onclick="cpQuick('career options for me')">🎯 Career Options</button>
        <button class="cp-sug" onclick="cpQuick('analyze my skill gaps')">📊 Skill Analysis</button>
        <button class="cp-sug" onclick="cpQuick('exam pathways for engineering')">📚 Exam Pathways</button>
        <button class="cp-sug" onclick="cpQuick('interview tips and tricks')">💼 Interview Tips</button>
        <button class="cp-sug" onclick="cpQuick('I am feeling stressed about my career')">🧘 I am stressed</button>
      </div>
      <div class="cp-input-area">
        <div class="cp-input-row">
          <textarea id="cpInput" placeholder="Ask anything about your career..." rows="1" onkeypress="cpKeyPress(event)"
            oninput="this.style.height='auto';this.style.height=this.scrollHeight+'px'"></textarea>
          <button class="cp-mic" id="cpMicBtn" onclick="toggleCpMicrophone()" title="Voice Input"><i
              class="fas fa-microphone"></i></button>
          <button class="cp-send" id="cpSendBtn" onclick="sendCpMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
        <div class="cp-input-hint">Press Enter to send · Shift+Enter for new line</div>
      </div>
    </div>

    <!-- Chat panel toggle tab -->
    <div class="chat-toggle-tab" id="chatToggleTab" onclick="toggleChatPanel()">
      <i class="fas fa-chevron-left" id="chatToggleIcon"></i>
    </div>
  </div>

  <script>
    // ════════════════════════════════════════
    // STATE
    // ════════════════════════════════════════
    const appState = {
      theme: 'dark',
      color: 'navy',
      user: {
        firstName: '', lastName: '', email: '', phone: '', state: '', city: '',
        qualification: '', field: '', college: '', gradYear: '', dob: '', gender: '',
        bio: '', status: '', targetRole: '', skills: '', experience: '',
        linkedin: '', portfolio: '', resumeName: '', avatarUrl: ''
      },
      chatPanelOpen: true,
      chats: [],   // [{id, title, messages:[]}]
      activeChatId: null,
    };

    // ════════════════════════════════════════
    // THEME & COLOR
    // ════════════════════════════════════════
    function toggleTheme() {
      appState.theme = appState.theme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', appState.theme);
      const isDark = appState.theme === 'dark';
      ['themeIconL', 'sbThemeIcon'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.className = `fas fa-${isDark ? 'moon' : 'sun'}`;
      });
      ['themeTextL', 'sbThemeText'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.textContent = isDark ? 'Light' : 'Dark';
      });
    }

    function setColor(c) {
      appState.color = c;
      document.documentElement.setAttribute('data-color', c);
      ['clrNavy', 'clrGreen', 'sbNavy', 'sbGreen'].forEach(id => {
        const el = document.getElementById(id);
        if (!el) return;
        el.classList.remove('active', 'on');
      });
      if (c === 'navy') {
        document.getElementById('clrNavy')?.classList.add('active');
        document.getElementById('sbNavy')?.classList.add('on');
      } else {
        document.getElementById('clrGreen')?.classList.add('active');
        document.getElementById('sbGreen')?.classList.add('on');
      }
    }

    // ════════════════════════════════════════
    // MODALS
    // ════════════════════════════════════════
    function openModal(id) { document.getElementById(id).classList.add('open'); }
    function closeModal(id) { document.getElementById(id).classList.remove('open'); }
    document.querySelectorAll('.modal-overlay').forEach(m => {
      m.addEventListener('click', function (e) { if (e.target === this) this.classList.remove('open'); });
    });

    // ════════════════════════════════════════
    // AUTH
    // ════════════════════════════════════════
    function switchTab(tab) {
      const isLogin = tab === 'login';
      document.getElementById('loginPanel').style.display = isLogin ? 'block' : 'none';
      document.getElementById('signupPanel').style.display = isLogin ? 'none' : 'block';
      document.getElementById('tabL').classList.toggle('active', isLogin);
      document.getElementById('tabS').classList.toggle('active', !isLogin);
      document.getElementById('formTitle').textContent = isLogin ? 'Welcome back 👋' : 'Create your account ✨';
      document.getElementById('formSubtitle').textContent = isLogin ? 'Sign in to your LakshyaSetu AI account' : 'Join LakshyaSetu AI for free today';
    }

    function togglePw(id, btn) {
      const inp = document.getElementById(id);
      const icon = btn.querySelector('i');
      inp.type = inp.type === 'password' ? 'text' : 'password';
      icon.className = inp.type === 'password' ? 'fas fa-eye' : 'fas fa-eye-slash';
    }

    function checkStrength(val) {
      let s = 0;
      if (val.length >= 8) s++;
      if (/[A-Z]/.test(val)) s++;
      if (/[0-9]/.test(val)) s++;
      if (/[^A-Za-z0-9]/.test(val)) s++;
      const cols = ['', '#EF4444', '#F59E0B', '#22C55E', '#16A34A'];
      const lbls = ['', 'Weak', 'Fair', 'Strong', 'Very Strong'];
      for (let i = 1; i <= 4; i++) {
        const el = document.getElementById('ss' + i);
        if (el) el.style.background = i <= s ? cols[s] : 'var(--border)';
      }
      const lbl = document.getElementById('strLabel');
      if (lbl) { lbl.textContent = val ? lbls[s] || 'Weak' : 'Enter a password'; lbl.style.color = val ? cols[s] : 'var(--text-muted)'; }
    }

    function openGooglePicker() { openModal('googleModal'); }

    function selectGoogleAccount(name, email, initials, color) {
      closeModal('googleModal');
      const parts = name.split(' ');
      enterApp(parts[0] || name, parts[1] || '', email, name.charAt(0), color);
    }

    function addGoogleAccount() {
      closeModal('googleModal');
      const email = prompt('Enter your Google account email:');
      if (email) {
        const name = email.split('@')[0].replace(/[._]/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
        enterApp(name, '', email, name.charAt(0), '#4285F4');
      }
    }

    function openLinkedInModal() { openModal('linkedinModal'); }

    function handleLinkedIn() {
      const url = document.getElementById('liUrl').value.trim();
      const email = document.getElementById('liEmail').value.trim();
      const pass = document.getElementById('liPass').value;
      if (!url && !email) { showToast('Please enter LinkedIn URL or email', 'error'); return; }
      if (!pass) { showToast('Please enter your password', 'error'); return; }
      closeModal('linkedinModal');
      const id = url || email;
      const name = url ? url.split('/').filter(Boolean).pop().replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase()) : email.split('@')[0].replace(/[._]/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
      const parts = name.split(' ');
      enterApp(parts[0] || 'User', parts[1] || '', email || url, name.charAt(0), '#0A66C2');
    }

    function handleLogin(e) {
      e.preventDefault();
      const email = document.getElementById('lEmail').value;
      const pass = document.getElementById('lPass').value;
      if (!email || !pass) { showToast('Please fill in all fields', 'error'); return; }
      if (pass.length < 6) { showToast('Incorrect password', 'error'); return; }
      const name = email.split('@')[0].replace(/[._]/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
      const parts = name.split(' ');
      enterApp(parts[0] || 'User', parts[1] || '', email, name.charAt(0), '#F59E0B');
    }

    function handleSignup(e) {
      e.preventDefault();
      const first = document.getElementById('sFirst').value.trim();
      const last = document.getElementById('sLast').value.trim();
      const email = document.getElementById('sEmail').value.trim();
      const pass = document.getElementById('sPass').value;
      const confirm = document.getElementById('sConfirm').value;
      if (pass !== confirm) { showToast('Passwords do not match!', 'error'); return; }
      if (pass.length < 8) { showToast('Password must be at least 8 characters', 'error'); return; }
      appState.user.state = document.getElementById('sState').value;
      appState.user.qualification = document.getElementById('sQual').value;
      enterApp(first, last, email, first.charAt(0), '#F59E0B');
    }

    function showForgot(e) {
      e.preventDefault();
      openModal('forgotModal');
    }

    function sendReset() {
      const email = document.getElementById('forgotEmail').value.trim();
      if (!email) { showToast('Enter your email address', 'error'); return; }
      closeModal('forgotModal');
      showToast(`Reset link sent to ${email}!`);
    }

    function enterApp(first, last, email, initial, color) {
      appState.user.firstName = first;
      appState.user.lastName = last;
      appState.user.email = email;
      appState.user.avatarColor = color;

      document.getElementById('loginPage').style.display = 'none';
      document.getElementById('mainApp').style.display = 'flex';

      updateSidebar();
      initChatPanel();
      newChat(true);
      showToast(`Welcome, ${first}! 🎉`);
    }

    function handleLogout() {
      document.getElementById('mainApp').style.display = 'none';
      document.getElementById('loginPage').style.display = 'block';
      appState.chats = [];
      appState.activeChatId = null;
    }

    // ════════════════════════════════════════
    // SIDEBAR / NAVIGATION
    // ════════════════════════════════════════
    function goSection(id) {
      document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      const sec = document.getElementById(id);
      if (sec) sec.classList.add('active');
      document.querySelectorAll(`.nav-item[data-s="${id}"]`).forEach(n => n.classList.add('active'));
    }

    function updateSidebar() {
      const { firstName, lastName, email, avatarUrl, avatarColor } = appState.user;
      const fullName = `${firstName} ${lastName}`.trim() || 'User';
      document.getElementById('sidebarName').textContent = fullName;

      const av = document.getElementById('sidebarAv');
      const avText = document.getElementById('sidebarAvText');
      const avImg = document.getElementById('sidebarAvImg');

      if (avatarUrl) {
        avImg.src = avatarUrl;
        avImg.style.display = 'block';
        avText.style.display = 'none';
        av.style.background = 'transparent';
      } else {
        avText.textContent = (firstName.charAt(0) + (lastName.charAt(0) || '')).toUpperCase() || 'U';
        avText.style.display = 'block';
        avImg.style.display = 'none';
        av.style.background = avatarColor || 'linear-gradient(135deg,var(--primary),var(--primary-dark))';
      }
    }

    // ════════════════════════════════════════
    // PROFILE MODAL
    // ════════════════════════════════════════
    function openProfile() {
      const u = appState.user;
      document.getElementById('pmFirst').value = u.firstName || '';
      document.getElementById('pmLast').value = u.lastName || '';
      document.getElementById('pmEmail').value = u.email || '';
      document.getElementById('pmPhone').value = u.phone || '';
      document.getElementById('pmDob').value = u.dob || '';
      document.getElementById('pmGender').value = u.gender || '';
      document.getElementById('pmBio').value = u.bio || '';
      document.getElementById('pmCity').value = u.city || '';
      document.getElementById('pmState').value = u.state || '';
      document.getElementById('pmQual').value = u.qualification || '';
      document.getElementById('pmField').value = u.field || '';
      document.getElementById('pmCollege').value = u.college || '';
      document.getElementById('pmGradYear').value = u.gradYear || '';
      document.getElementById('pmStatus').value = u.status || '';
      document.getElementById('pmTargetRole').value = u.targetRole || '';
      document.getElementById('pmSkills').value = u.skills || '';
      document.getElementById('pmExp').value = u.experience || '';
      document.getElementById('pmLinkedIn').value = u.linkedin || '';
      document.getElementById('pmPortfolio').value = u.portfolio || '';

      const fullName = `${u.firstName} ${u.lastName}`.trim() || 'Your Name';
      document.getElementById('pmAvName').textContent = fullName;
      document.getElementById('pmAvEmail').textContent = u.email || 'your@email.com';
      const initials = (u.firstName.charAt(0) + (u.lastName.charAt(0) || '')).toUpperCase() || '?';
      document.getElementById('pmAvInitials').textContent = initials;

      if (u.resumeName) { document.getElementById('pmResumeName').textContent = '📄 ' + u.resumeName; document.getElementById('pmResumeName').style.display = 'block'; }

      if (u.avatarUrl) {
        document.getElementById('pmAvImg').src = u.avatarUrl;
        document.getElementById('pmAvImg').style.display = 'block';
        document.getElementById('pmAvInitials').style.display = 'none';
      } else {
        document.getElementById('pmAvImg').style.display = 'none';
        document.getElementById('pmAvInitials').style.display = 'block';
      }

      openModal('profileModal');
    }

    function saveProfile() {
      const u = appState.user;
      u.firstName = document.getElementById('pmFirst').value.trim() || u.firstName;
      u.lastName = document.getElementById('pmLast').value.trim() || u.lastName;
      u.email = document.getElementById('pmEmail').value.trim() || u.email;
      u.phone = document.getElementById('pmPhone').value.trim();
      u.dob = document.getElementById('pmDob').value;
      u.gender = document.getElementById('pmGender').value;
      u.bio = document.getElementById('pmBio').value.trim();
      u.city = document.getElementById('pmCity').value.trim();
      u.state = document.getElementById('pmState').value.trim();
      u.qualification = document.getElementById('pmQual').value;
      u.field = document.getElementById('pmField').value.trim();
      u.college = document.getElementById('pmCollege').value.trim();
      u.gradYear = document.getElementById('pmGradYear').value;
      u.status = document.getElementById('pmStatus').value;
      u.targetRole = document.getElementById('pmTargetRole').value.trim();
      u.skills = document.getElementById('pmSkills').value.trim();
      u.experience = document.getElementById('pmExp').value;
      u.linkedin = document.getElementById('pmLinkedIn').value.trim();
      u.portfolio = document.getElementById('pmPortfolio').value.trim();

      updateSidebar();
      closeModal('profileModal');
      showToast('Profile saved successfully!');
    }

    function handleAvatarChange(input) {
      if (!input.files[0]) return;
      const reader = new FileReader();
      reader.onload = function (e) {
        appState.user.avatarUrl = e.target.result;
        document.getElementById('pmAvImg').src = e.target.result;
        document.getElementById('pmAvImg').style.display = 'block';
        document.getElementById('pmAvInitials').style.display = 'none';
        updateSidebar();
      };
      reader.readAsDataURL(input.files[0]);
    }

    function handlePmResumeSelect(input) {
      if (!input.files[0]) return;
      appState.user.resumeName = input.files[0].name;
      document.getElementById('pmResumeName').textContent = '📄 ' + input.files[0].name;
      document.getElementById('pmResumeName').style.display = 'block';
    }

    function handlePmResumeDrop(e) {
      e.preventDefault();
      const file = e.dataTransfer.files[0];
      if (file) { appState.user.resumeName = file.name; document.getElementById('pmResumeName').textContent = '📄 ' + file.name; document.getElementById('pmResumeName').style.display = 'block'; }
      e.currentTarget.style.borderColor = 'var(--border)';
    }

    function handleResumeSelect(input) {
      if (!input.files[0]) return;
      document.getElementById('resumeFileName').textContent = '✓ ' + input.files[0].name;
      document.getElementById('resumeFileName').style.display = 'block';
      appState.user.resumeName = input.files[0].name;
    }

    function handleResumeDrop(e) {
      e.preventDefault();
      document.getElementById('uploadArea').classList.remove('dragging');
      const file = e.dataTransfer.files[0];
      if (file) { handleResumeSelect({ files: [file] }); }
    }

    // ════════════════════════════════════════
    // RIGHT CHAT PANEL
    // ════════════════════════════════════════
    let chatPanelOpen = true;

    function toggleChatPanel() {
      chatPanelOpen = !chatPanelOpen;
      const panel = document.getElementById('chatPanel');
      const tab = document.getElementById('chatToggleTab');
      const icon = document.getElementById('chatToggleIcon');
      const main = document.querySelector('.main-content');

      if (chatPanelOpen) {
        panel.classList.remove('collapsed');
        tab.style.right = 'var(--chatpanel-w)';
        icon.className = 'fas fa-chevron-right';
        main.style.marginRight = 'var(--chatpanel-w)';
      } else {
        panel.classList.add('collapsed');
        tab.style.right = '0';
        icon.className = 'fas fa-chevron-left';
        main.style.marginRight = '0';
      }
    }

    function initChatPanel() {
      // on first load
    }

    function newChat(silent) {
      const id = 'chat_' + Date.now();
      const chatNum = appState.chats.length + 1;
      const chat = {
        id,
        title: `Chat ${chatNum}`,
        messages: [
          { role: 'bot', text: `Hey ${appState.user.firstName || 'there'}! 👋 I'm your LakshyaSetu AI assistant. I can help with career guidance, skill gaps, exam prep, and more. What's on your mind?`, time: getTime() }
        ]
      };
      appState.chats.push(chat);
      setActiveChat(id);
      if (!silent) renderCpTabs();
      else renderCpTabs();
    }

    function setActiveChat(id) {
      appState.activeChatId = id;
      renderCpTabs();
      renderCpMessages();
    }

    function clearCurrentChat() {
      const chat = getActiveChat();
      if (!chat) return;
      chat.messages = [{ role: 'bot', text: 'Chat cleared. How can I help you?', time: getTime() }];
      renderCpMessages();
    }

    function getActiveChat() {
      return appState.chats.find(c => c.id === appState.activeChatId);
    }

    function renderCpTabs() {
      const container = document.getElementById('cpTabs');
      container.innerHTML = '';
      appState.chats.forEach(chat => {
        const tab = document.createElement('button');
        tab.className = 'cp-tab' + (chat.id === appState.activeChatId ? ' active' : '');
        tab.innerHTML = `<i class="fas fa-comment" style="font-size:10px"></i> ${chat.title} <span class="cp-tab-close" onclick="event.stopPropagation();deleteChat('${chat.id}')">✕</span>`;
        tab.onclick = () => setActiveChat(chat.id);
        container.appendChild(tab);
      });
      const newBtn = document.createElement('button');
      newBtn.className = 'cp-new-tab';
      newBtn.title = 'New Chat';
      newBtn.innerHTML = '<i class="fas fa-plus"></i>';
      newBtn.onclick = () => newChat(false);
      container.appendChild(newBtn);
    }

    function deleteChat(id) {
      appState.chats = appState.chats.filter(c => c.id !== id);
      if (appState.activeChatId === id) {
        if (appState.chats.length > 0) setActiveChat(appState.chats[appState.chats.length - 1].id);
        else newChat(false);
        return;
      }
      renderCpTabs();
    }

    function renderCpMessages() {
      const chat = getActiveChat();
      const container = document.getElementById('cpMessages');
      if (!chat) { container.innerHTML = ''; return; }
      container.innerHTML = chat.messages.map(m => buildCpMsg(m)).join('');
      container.scrollTop = container.scrollHeight;
    }

    function buildCpMsg(m) {
      const isBot = m.role === 'bot';
      const av = isBot
        ? `<div class="cp-msg-av bot"><i class="fas fa-robot" style="font-size:11px"></i></div>`
        : `<div class="cp-msg-av usr">${(appState.user.firstName.charAt(0) + (appState.user.lastName.charAt(0) || '')).toUpperCase() || 'U'}</div>`;
      return `<div class="cp-msg ${isBot ? 'bot' : 'user'}">
    ${av}
    <div>
      <div class="cp-msg-bubble">${m.text}</div>
      <div class="cp-msg-time">${m.time}</div>
    </div>
  </div>`;
    }

    function cpKeyPress(e) {
      if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendCpMessage(); }
    }

    function cpQuick(txt) {
      document.getElementById('cpInput').value = txt;
      sendCpMessage();
    }

    function sendCpMessage() {
      const input = document.getElementById('cpInput');
      const txt = input.value.trim();
      if (!txt) return;
      input.value = '';
      input.style.height = 'auto';

      const chat = getActiveChat();
      if (!chat) return;

      // Rename chat from first message
      if (chat.messages.length === 1) chat.title = txt.length > 22 ? txt.slice(0, 22) + '…' : txt;

      chat.messages.push({ role: 'user', text: txt, time: getTime() });
      renderCpMessages();
      renderCpTabs();

      // Typing indicator
      const container = document.getElementById('cpMessages');
      const typingDiv = document.createElement('div');
      typingDiv.className = 'cp-msg bot';
      typingDiv.id = 'typingIndicator';
      typingDiv.innerHTML = `<div class="cp-msg-av bot"><i class="fas fa-robot" style="font-size:11px"></i></div><div><div class="cp-msg-bubble"><div class="typing-dot"><span></span><span></span><span></span></div></div></div>`;
      container.appendChild(typingDiv);
      container.scrollTop = container.scrollHeight;

      document.getElementById('cpSendBtn').disabled = true;

      setTimeout(() => {
        const typing = document.getElementById('typingIndicator');
        if (typing) typing.remove();
        const reply = getAIReply(txt);
        chat.messages.push({ role: 'bot', text: reply, time: getTime() });
        renderCpMessages();
        document.getElementById('cpSendBtn').disabled = false;
      }, 1000 + Math.random() * 600);
    }

    function getTime() {
      return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    }

    function getAIReply(msg) {
      const m = msg.toLowerCase();
      const u = appState.user;
      if (m.includes('career') && m.includes('option')) return `Great question! Based on your profile, here are some top career paths to explore:<br><br>🚀 <strong>Software Developer</strong> — High demand, great pay<br>📊 <strong>Data Scientist</strong> — Growing field<br>💼 <strong>Business Analyst</strong> — Mix of tech & strategy<br><br>Go to the <em>Career Match</em> section for a detailed analysis!`;
      if (m.includes('skill') && (m.includes('gap') || m.includes('analyz'))) return `To analyze your skill gaps, I need to know your target role. Head to the <em>Skill Gap</em> section — enter your current skills and I'll show exactly what you're missing and how to fill those gaps! 📈`;
      if (m.includes('exam')) return `LakshyaSetu covers 20+ major exams including:<br><br>📚 JEE, NEET, GATE (Engineering & Medical)<br>🏛️ UPSC Civil Services (IAS/IPS)<br>🏦 IBPS PO & SBI (Banking)<br>📋 CAT, GMAT (Management)<br><br>Visit the <em>Exam Pathways</em> section for detailed guidance!`;
      if (m.includes('interview')) return `Here are my top interview tips:<br><br>✅ Research the company thoroughly<br>✅ Use the STAR method for behavioral questions<br>✅ Prepare 3-5 questions to ask the interviewer<br>✅ Practice coding problems for tech roles<br>✅ Follow up with a thank-you email<br><br>Go to <em>Interview Prep</em> for role-specific questions!`;
      if (m.includes('stress') || m.includes('anxiety') || m.includes('overwhelm')) return `I hear you, and it's completely valid to feel that way. Career journeys are rarely linear. 💙<br><br>Try this right now:<br>1️⃣ Take 3 deep breaths<br>2️⃣ Write down just ONE thing you can do today<br>3️⃣ Celebrate small wins<br><br>Visit the <em>Mentor Support</em> section for more personalized support. You've got this! 🌟`;
      if (m.includes('motivat') || m.includes('demotivat')) return `Feeling unmotivated is normal — even the most successful people go through it. Here's what helps:<br><br>🎯 Reconnect with your <em>why</em><br>🏆 Set tiny, achievable goals<br>📅 Create a daily routine<br>🤝 Find an accountability partner<br><br>Remember: progress, not perfection!`;
      if (m.includes('hello') || m.includes('hi') || m.includes('hey')) return `Hello ${u.firstName || 'there'}! 😊 I'm here to help with your career journey. You can ask me about career paths, skill gaps, exam prep, interview tips, or just talk if you're feeling stuck. What's on your mind?`;
      if (m.includes('roadmap')) return `I'll help you create a personalized learning roadmap! 🗺️<br><br>Go to the <em>Learning Roadmap</em> section, select your target role and current level, and I'll generate a structured 3-stage plan with specific courses, projects, and milestones!`;
      if (u.targetRole && m.includes(u.targetRole.toLowerCase())) return `${u.targetRole} is a great goal! Based on your current profile, here's my advice:<br><br>1. Build a strong portfolio with real projects<br>2. Network on LinkedIn & GitHub<br>3. Apply to internships first<br>4. Practice with mock interviews<br><br>Check the <em>Skill Gap</em> section for a detailed readiness analysis!`;
      return `That's a great question! Here's how I can help:<br><br>🎯 <strong>Career Match</strong> — Find roles that fit you<br>📊 <strong>Skill Gap</strong> — See what you need to learn<br>📚 <strong>Exam Pathways</strong> — Government & entrance exams<br>🗺️ <strong>Roadmap</strong> — Step-by-step learning plan<br>💼 <strong>Interview Prep</strong> — Practice & tips<br>💙 <strong>Mentor</strong> — Emotional support<br><br>Which area would you like to explore?`;
    }

    // ════════════════════════════════════════
    // MENTOR CHAT
    // ════════════════════════════════════════
    function selectEmotion(btn) {
      document.querySelectorAll('.emotion-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      const emotion = btn.dataset.emotion;
      const responses = {
        confused: "It's completely okay to feel confused. Career paths aren't always clear. Let's break it down step by step — what area feels most uncertain to you?",
        stressed: "I hear you. Stress is tough, especially when your future feels uncertain. Take a deep breath. Let's tackle one thing at a time — what's causing the most stress right now?",
        demotivated: "Feeling demotivated happens to everyone. Remember: even the smallest step forward is progress. What goal were you working toward?",
        overwhelmed: "When everything feels like too much, the best move is to pause and simplify. Let's identify just ONE thing you can do today.",
        anxious: "Anxiety often comes from uncertainty about outcomes. Let's focus on what you CAN control. What's worrying you most right now?",
        confident: "That's amazing! Confidence is your biggest asset. Let's channel that energy into a concrete action plan. What's your next big goal?"
      };
      addMentorMsg(responses[emotion] || "Tell me more about how you're feeling.", 'bot');
    }

    function sendMentorMsg() {
      const input = document.getElementById('mentorInput');
      const msg = input.value.trim();
      if (!msg) return;
      addMentorMsg(msg, 'user');
      input.value = '';
      setTimeout(() => addMentorMsg(getAIReply(msg), 'bot'), 800);
    }

    function addMentorMsg(text, type) {
      const container = document.getElementById('mentorMessages');
      const div = document.createElement('div');
      div.className = `message ${type === 'bot' ? '' : 'user-message'}`;
      div.innerHTML = type === 'bot'
        ? `<div class="message-icon"><i class="fas fa-robot"></i></div><div class="message-content">${text}</div>`
        : `<div class="message-content">${text}</div>`;
      container.appendChild(div);
      container.scrollTop = container.scrollHeight;
    }

    // ════════════════════════════════════════
    // CAREER MATCH - Enhanced with Quiz & AIR Ranking
    // ════════════════════════════════════════

    // Quiz questions bank (extensible)
    const quizQuestionsBank = {
      'Software Developer': [
        { q: 'What is the time complexity of binary search?', options: ['O(n)', 'O(log n)', 'O(n²)', 'O(1)'], ans: 1 },
        { q: 'Which data structure uses LIFO?', options: ['Queue', 'Stack', 'Array', 'Linked List'], ans: 1 },
        { q: 'What does HTML stand for?', options: ['Hyper Text Markup Language', 'High Tech Modern Language', 'Home Tool Markup Language', 'Hyperlinks Text Mark Language'], ans: 0 },
        { q: 'Which CSS property changes text color?', options: ['text-color', 'font-color', 'color', 'foreground'], ans: 2 },
        { q: 'What is Git used for?', options: ['Database', 'Version Control', 'Design', 'Testing'], ans: 1 },
        { q: 'What is API?', options: ['Application Programming Interface', 'Apple Pie Ingredients', 'Advanced Program Integration', 'Auto Program Interface'], ans: 0 },
        { q: 'Which language is used for web development?', options: ['Python', 'Java', 'JavaScript', 'C++'], ans: 2 },
        { q: 'What is SQL used for?', options: ['Styling', 'Database queries', 'Mobile apps', 'Game development'], ans: 1 },
        { q: 'What does CSS stand for?', options: ['Creative Style Sheets', 'Cascading Style Sheets', 'Computer Style Sheets', 'Colorful Style Sheets'], ans: 1 },
        { q: 'What is React?', options: ['Database', 'Programming Language', 'JavaScript Library', 'Operating System'], ans: 2 },
      ],
      'Data Scientist': [
        { q: 'What is machine learning?', options: ['Hardware', 'Type of programming', 'Study of algorithms that learn from data', 'Database system'], ans: 2 },
        { q: 'What is supervised learning?', options: ['Learning without labels', 'Learning with labeled data', 'Unsupervised clustering', 'Reinforcement learning'], ans: 1 },
        { q: 'What does RMSE stand for?', options: ['Root Mean Square Error', 'Random Machine State Error', 'Real Mean System Error', 'Relative Mean Standard Error'], ans: 0 },
        { q: 'Which Python library is used for data analysis?', options: ['Django', 'Pandas', 'Flask', 'Pyramid'], ans: 1 },
        { q: 'What is overfitting?', options: ['Model too simple', 'Model performs well on training but poorly on test', 'Perfect model', 'Underfitting'], ans: 1 },
        { q: 'What is a confusion matrix?', options: ['Type of chart', 'Tool to evaluate classification models', 'Database', 'Programming language'], ans: 1 },
        { q: 'Which algorithm is used for classification?', options: ['Linear Regression', 'K-Means', 'Logistic Regression', 'PCA'], ans: 2 },
        { q: 'What is feature scaling?', options: ['Reducing features', 'Normalizing feature values', 'Adding features', 'Removing features'], ans: 1 },
        { q: 'What is cross-validation?', options: ['Testing method', 'Technique to evaluate models', 'Training method', 'Deployment'], ans: 1 },
        { q: 'What is Naive Bayes?', options: ['Algorithm', 'Database', 'Programming language', 'Operating system'], ans: 0 },
      ],
      'Business Analyst': [
        { q: 'What is the primary role of a Business Analyst?', options: ['Coding', 'Understanding business needs and creating solutions', 'Marketing', 'Sales'], ans: 1 },
        { q: 'What is a use case?', options: ['Type of software', 'Description of how system interacts with users', 'Database', 'Programming language'], ans: 1 },
        { q: 'What does SQL stand for?', options: ['Structured Query Language', 'Simple Query Language', 'Standard Query Logic', 'System Query List'], ans: 0 },
        { q: 'What is requirement gathering?', options: ['Collecting user needs', 'Writing code', 'Testing software', 'Deploying apps'], ans: 0 },
        { q: 'What is a stakeholder?', options: ['Project owner', 'Person with interest in project', 'Developer', 'Designer'], ans: 1 },
        { q: 'What is SWOT analysis?', options: ['Software', 'Strategic planning tool', 'Database', 'Programming language'], ans: 1 },
        { q: 'What is data visualization?', options: ['Creating charts and graphs', 'Database management', 'Coding', 'Testing'], ans: 0 },
        { q: 'What is Excel used for?', options: ['Web development', 'Spreadsheet analysis', 'Game development', 'Operating system'], ans: 1 },
        { q: 'What is a process flow?', options: ['Type of dance', 'Visual representation of process steps', 'Database', 'Programming language'], ans: 1 },
        { q: 'What is project management?', options: ['Coding', 'Planning and executing projects', 'Designing', 'Testing'], ans: 1 },
      ],
      'UX Designer': [
        { q: 'What is UX design?', options: ['User Experience design', 'User Extension', 'Unix Expression', 'Universal Exit'], ans: 0 },
        { q: 'What is a wireframe?', options: ['Type of code', 'Visual guide for page layout', 'Database', 'Programming language'], ans: 1 },
        { q: 'What is user research?', options: ['Coding', 'Understanding user needs', 'Database', 'Testing'], ans: 1 },
        { q: 'What is Figma?', options: ['Design tool', 'Programming language', 'Database', 'Operating system'], ans: 0 },
        { q: 'What is prototyping?', options: ['Type of testing', 'Creating interactive model', 'Database', 'Coding'], ans: 1 },
        { q: 'What is accessibility in design?', options: ['Making design for everyone', 'Adding colors', 'Creating animations', 'Writing code'], ans: 0 },
        { q: 'What is usability testing?', options: ['Testing with users', 'Unit testing', 'Database testing', 'Performance testing'], ans: 0 },
        { q: 'What is a persona?', options: ['Type of font', 'Representation of target user', 'Database', 'Programming language'], ans: 1 },
        { q: 'What is information architecture?', options: ['Structuring information', 'Web development', 'Database', 'Coding'], ans: 0 },
        { q: 'What is color theory?', options: ['Understanding colors', 'Type of code', 'Database', 'Operating system'], ans: 0 },
      ],
      'Digital Marketer': [
        { q: 'What is SEO?', options: ['Social Engine Optimization', 'Search Engine Optimization', 'Sales Engine Operation', 'System Engine Output'], ans: 1 },
        { q: 'What does PPC stand for?', options: ['Pay Per Click', 'Price Per Customer', 'Post Per Campaign', 'Public Performance Click'], ans: 0 },
        { q: 'What is content marketing?', options: ['Creating and sharing content', 'Coding', 'Database', 'Testing'], ans: 0 },
        { q: 'What is social media marketing?', options: ['Using social platforms for promotion', 'Email marketing', 'SEO', 'Coding'], ans: 0 },
        { q: 'What is Google Analytics?', options: ['Design tool', 'Web analytics tool', 'Database', 'Programming language'], ans: 1 },
        { q: 'What is email marketing?', options: ['Sending promotional emails', 'Coding', 'Database', 'Designing'], ans: 0 },
        { q: 'What is a CTA?', options: ['Call To Action', 'Computer Technical Analysis', 'Creative Text Arrangement', 'Central Time Area'], ans: 0 },
        { q: 'What is conversion rate?', options: ['Percentage of visitors who convert', 'Loading speed', 'Code efficiency', 'Database size'], ans: 0 },
        { q: 'What is viral marketing?', options: ['Marketing through viruses', 'Content that spreads rapidly', 'Database marketing', 'Coding'], ans: 1 },
        { q: 'What is influencer marketing?', options: ['Using influencers for promotion', 'Internal marketing', 'Database marketing', 'Coding'], ans: 0 },
      ],
      'Financial Analyst': [
        { q: 'What is financial modeling?', options: ['Creating financial representations', 'Designing buildings', 'Database', 'Coding'], ans: 0 },
        { q: 'What does ROI stand for?', options: ['Return on Investment', 'Rate of Interest', 'Revenue of Industry', 'Risk of Investment'], ans: 0 },
        { q: 'What is Excel used for in finance?', options: ['Web development', 'Financial calculations', 'Game development', 'Designing'], ans: 1 },
        { q: 'What is balance sheet?', options: ['Fitness tracker', 'Financial statement', 'Database', 'Programming language'], ans: 1 },
        { q: 'What is NPV?', options: ['Net Present Value', 'New Project Value', 'Number Price Value', 'National Price Volume'], ans: 0 },
        { q: 'What is ratio analysis?', options: ['Analyzing financial ratios', 'Coding', 'Database', 'Designing'], ans: 0 },
        { q: 'What is risk assessment?', options: ['Evaluating potential risks', 'Testing software', 'Database', 'Coding'], ans: 0 },
        { q: 'What is capital budgeting?', options: ['Budget for travel', 'Long-term investment planning', 'Database', 'Coding'], ans: 1 },
        { q: 'What is cash flow?', options: ['Water flow', 'Movement of cash', 'Database', 'Coding'], ans: 1 },
        { q: 'What is valuation?', options: ['Determining worth', 'Writing code', 'Database', 'Testing'], ans: 0 },
      ],
      'Product Manager': [
        { q: 'What is product management?', options: ['Managing products', 'Coding', 'Database', 'Designing'], ans: 0 },
        { q: 'What is a product roadmap?', options: ['Travel route', 'Strategic plan for product', 'Database', 'Coding'], ans: 1 },
        { q: 'What is Agile?', options: ['Programming language', 'Project management methodology', 'Database', 'Operating system'], ans: 1 },
        { q: 'What is a user story?', options: ['Novel', 'Description of feature from user perspective', 'Database', 'Code'], ans: 1 },
        { q: 'What is prioritization?', options: ['Ordering items by importance', 'Coding', 'Database', 'Testing'], ans: 0 },
        { q: 'What is stakeholder management?', options: ['Managing people with interest', 'Coding', 'Database', 'Designing'], ans: 0 },
        { q: 'What is a backlog?', options: ['Type of furniture', 'List of tasks to do', 'Database', 'Coding'], ans: 1 },
        { q: 'What is sprint planning?', options: ['Running competition', 'Planning work for sprint', 'Database', 'Coding'], ans: 1 },
        { q: 'What is KPI?', options: ['Key Performance Indicator', 'Knowledge Processing Item', 'Key Product Input', 'Keep Project Inline'], ans: 0 },
        { q: 'What is market research?', options: ['Garden research', 'Understanding market needs', 'Database', 'Coding'], ans: 1 },
      ],
      'DevOps Engineer': [
        { q: 'What is DevOps?', options: ['Developer Operations', 'Development and Operations', 'Device Operations', 'Data Operations'], ans: 1 },
        { q: 'What is Docker?', options: ['Container platform', 'Programming language', 'Database', 'Operating system'], ans: 0 },
        { q: 'What is CI/CD?', options: ['Continuous Integration/Deployment', 'Code ID', 'Central Internet', 'Create Install Deploy'], ans: 0 },
        { q: 'What is Kubernetes?', options: ['Container orchestration', 'Programming language', 'Database', 'Web browser'], ans: 0 },
        { q: 'What is AWS?', options: ['Amazon Web Services', 'Advanced Windows System', 'Application Website Server', 'Automated Work Solution'], ans: 0 },
        { q: 'What is version control?', options: ['TV remote', 'Tracking code changes', 'Database', 'Coding'], ans: 1 },
        { q: 'What is cloud computing?', options: ['Weather computing', 'Computing via internet', 'Database', 'Coding'], ans: 1 },
        { q: 'What is automation?', options: ['Manual work', 'Reducing manual effort', 'Database', 'Designing'], ans: 1 },
        { q: 'What is monitoring?', options: ['Watching TV', 'Tracking system performance', 'Database', 'Coding'], ans: 1 },
        { q: 'What is infrastructure as code?', options: ['Coding infrastructure', 'Managing infrastructure through code', 'Database', 'Designing'], ans: 1 },
      ],
    };

    // Track used questions for each career (non-repeating)
    let usedQuizQuestions = {};

    // Reset quiz for a career
    function resetQuizForCareer(career) {
      usedQuizQuestions[career] = [];
    }

    // Get random non-repeating question
    function getRandomQuestion(career) {
      if (!quizQuestionsBank[career]) {
        return { q: 'No questions available for this career', options: ['N/A'], ans: 0 };
      }

      if (!usedQuizQuestions[career]) {
        usedQuizQuestions[career] = [];
      }

      // Reset if all questions used
      if (usedQuizQuestions[career].length >= quizQuestionsBank[career].length) {
        usedQuizQuestions[career] = [];
      }

      const available = quizQuestionsBank[career].filter((_, idx) => !usedQuizQuestions[career].includes(idx));
      if (available.length === 0) {
        usedQuizQuestions[career] = [];
        return getRandomQuestion(career);
      }

      const randomIdx = Math.floor(Math.random() * available.length);
      const question = available[randomIdx];
      const originalIdx = quizQuestionsBank[career].indexOf(question);
      usedQuizQuestions[career].push(originalIdx);

      return question;
    }

    // Generate AIR (All India Rank) based on quiz score
    function generateAIR(career, score) {
      // Higher score = better rank (lower number)
      const baseRank = Math.floor(Math.random() * 3000) + 500; // 500 to 3500
      const adjustedRank = Math.max(1, Math.floor(baseRank - (score * 20)));
      return adjustedRank;
    }

    // Check if qualified based on AIR
    function isQualified(air) {
      return air < 1500;
    }

    // Get alternative career suggestions
    function getAlternativeCareers(currentCareer, userSkills) {
      const userArr = userSkills.split(',').map(s => s.trim()).filter(Boolean).map(s => s.toLowerCase());
      const allCareers = ['Software Developer', 'Data Scientist', 'Business Analyst', 'UX Designer', 'Digital Marketer', 'Financial Analyst', 'Product Manager', 'DevOps Engineer'];

      return allCareers
        .filter(c => c !== currentCareer)
        .map(career => {
          const skills = quizQuestionsBank[career] ? quizQuestionsBank[career].map((_, i) => ['python', 'javascript', 'programming', 'data', 'analysis', 'design', 'marketing', 'finance', 'management', 'devops', 'cloud'][i % 11]) : [];
          const matched = skills.filter(s => userArr.some(u => u.includes(s) || s.includes(u)));
          const score = userArr.length ? Math.min(100, Math.round((matched.length / 5) * 100)) : 30;
          return { career, score };
        })
        .sort((a, b) => b.score - a.score)
        .slice(0, 3);
    }

    // Start quiz for a career
    function startQuiz(career) {
      resetQuizForCareer(career);
      const question = getRandomQuestion(career);
      const air = generateAIR(career, 0); // Initial AIR

      const quizHTML = `
    <div class="quiz-container" id="quiz-${career.replace(/\s/g, '')}">
      <div style="background:var(--bg-card);border:1px solid var(--border);border-radius:13px;padding:20px;margin-top:15px">
        <h4 style="margin-bottom:15px;color:var(--primary)">📝 Quiz: ${career}</h4>
        <p style="font-size:14px;margin-bottom:15px;color:var(--text-primary)">${question.q}</p>
        <div style="display:flex;flex-direction:column;gap:8px">
          ${question.options.map((opt, idx) => `
            <button onclick="answerQuiz('${career}', ${idx}, ${question.ans})" 
                    style="padding:12px;text-align:left;background:var(--bg-input);border:1.5px solid var(--border);border-radius:8px;color:var(--text-primary);cursor:pointer;font-size:13px;transition:all .2s"
                    onmouseover="this.style.borderColor='var(--primary)'"
                    onmouseout="this.style.borderColor='var(--border)'">
              ${opt}
            </button>
          `).join('')}
        </div>
        <div id="quiz-result-${career.replace(/\s/g, '')}" style="margin-top:15px"></div>
      </div>
    </div>
  `;

      // Add quiz container after the career card
      const existingQuiz = document.getElementById(`quiz-${career.replace(/\s/g, '')}`);
      if (existingQuiz) {
        existingQuiz.remove();
      }

      // Find the career card and add quiz after it
      const cards = document.querySelectorAll('.result-card');
      cards.forEach(card => {
        if (card.querySelector('h3')?.textContent.includes(career)) {
          const quizDiv = document.createElement('div');
          quizDiv.innerHTML = quizHTML;
          card.after(quizDiv.firstElementChild);
        }
      });
    }

    // Handle quiz answer
    function answerQuiz(career, selectedIdx, correctIdx) {
      const isCorrect = selectedIdx === correctIdx;
      const score = isCorrect ? 100 : 0;
      const air = generateAIR(career, score);
      const qualified = isQualified(air);

      const resultDiv = document.getElementById(`quiz-result-${career.replace(/\s/g, '')}`);

      let resultHTML = `
    <div style="padding:15px;border-radius:10px;margin-top:10px;${qualified ? 'background:rgba(34,197,94,0.1);border:1px solid rgba(34,197,94,0.3)' : 'background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.3)'}">
      <h5 style="color:${qualified ? '#22C55E' : '#EF4444'};margin-bottom:8px">
        ${isCorrect ? '✅ Correct!' : '❌ Incorrect!'} 
        ${isCorrect ? '' : `Correct answer: ${quizQuestionsBank[career][usedQuizQuestions[career][usedQuizQuestions[career].length - 1]].options[correctIdx]}`}
      </h5>
      <p style="font-size:13px;color:var(--text-secondary)">
        <strong>Your AIR:</strong> ${air} | 
        <strong>${qualified ? '🎉 QUALIFIED!' : '⚠️ Not Qualified'}</strong>
        ${qualified ? '' : ' (AIR ≥ 1500)'}
      </p>
  `;

      if (qualified) {
        resultHTML += `
      <p style="font-size:12px;color:#22C55E;margin-top:8px">🎉 Congratulations! You have a good chance of getting into this career path!</p>
      <button onclick="startQuiz('${career}')" style="margin-top:10px;padding:8px 16px;background:var(--primary);color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:12px">Try Again</button>
    `;
      } else {
        const userSkills = document.getElementById('userSkills').value;
        const alternatives = getAlternativeCareers(career, userSkills);

        resultHTML += `
      <div style="margin-top:12px;padding-top:12px;border-top:1px solid var(--border)">
        <p style="font-size:13px;color:var(--text-primary);margin-bottom:8px"><strong>💡 Suggestions:</strong></p>
        <p style="font-size:12px;color:var(--text-secondary)">Since your AIR is ${air} (≥ 1500), consider these alternative career paths that match your skills:</p>
        <div style="margin-top:10px;display:flex;flex-direction:column;gap:8px">
          ${alternatives.map(alt => `
            <div style="display:flex;align-items:center;justify-content:space-between;padding:10px;background:var(--bg-input);border-radius:8px">
              <span style="font-size:13px;color:var(--text-primary)">${alt.career}</span>
              <span style="font-size:11px;color:var(--primary)">${alt.score}% Match</span>
            </div>
          `).join('')}
        </div>
        <button onclick="startQuiz('${career}')" style="margin-top:12px;padding:8px 16px;background:var(--primary);color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:12px">📝 Take New Quiz</button>
        <p style="font-size:11px;color:var(--text-muted);margin-top:8px">Note: Quiz questions are randomized and won't repeat!</p>
      </div>
    `;
      }

      resultHTML += `</div>`;
      resultDiv.innerHTML = resultHTML;
    }

    // Job Categories Data for 12th Pass/Fail Students
    const jobCategoriesData = {
      'Private Sector Jobs': {
        icon: 'fa-building',
        color: '#3B82F6',
        jobs: [
          'Delivery Executive (Swiggy, Zomato, Amazon, Flipkart)',
          'Warehouse Assistant',
          'Packing Staff',
          'Helper / Store Helper',
          'Office Boy / Office Assistant',
          'Housekeeping Staff',
          'Security Guard',
          'Peon',
          'Factory Worker',
          'Construction Worker',
          'Electrician Helper',
          'Mechanic Helper',
          'Car Washer',
          'Bike Mechanic Assistant',
          'Loading & Unloading Staff',
          'Hotel Waiter / Steward',
          'Kitchen Helper',
          'Cleaner (Mall / Office / Hospital)',
          'Driver (with valid license)',
          'Courier Delivery Staff'
        ]
      },
      'Sales & Support Jobs': {
        icon: 'fa-handshake',
        color: '#8B5CF6',
        jobs: [
          'Telecaller',
          'Field Sales Executive',
          'Retail Sales Associate',
          'Promoter (Mall / Events)',
          'Customer Service Support (Basic English required)'
        ]
      },
      'Skill-Based Jobs': {
        icon: 'fa-tools',
        color: '#F59E0B',
        jobs: [
          'Plumber',
          'Electrician (after short training)',
          'AC Technician',
          'Mobile Repair Technician',
          'Computer Repair Technician',
          'Tailor',
          'Beautician',
          'Barber',
          'Photographer Assistant',
          'Printing Shop Operator'
        ]
      },
      'Government Jobs': {
        icon: 'fa-landmark',
        color: '#22C55E',
        jobs: [
          'Railway Group D (some posts allow 10th)',
          'Police Constable (10th/12th depending on state)',
          'Home Guard',
          'Army Soldier (minimum 10th/12th depending category)',
          'Forest Guard (in some states)'
        ]
      },
      'Self-Employment': {
        icon: 'fa-store',
        color: '#EC4899',
        jobs: [
          'Small Grocery Shop',
          'Street Food Stall',
          'Tea Stall',
          'Freelance Delivery Partner',
          'Online Reselling (Meesho / Flipkart Seller)',
          'YouTube Content Creator',
          'Car Washing Business',
          'Mobile Repair Shop',
          'Poultry Farming',
          'Dairy Farming'
        ]
      }
    };

    // Function to display job category results
    function displayJobCategoryResults(categoryName) {
      const category = jobCategoriesData[categoryName];
      if (!category) return '';

      return `
    <div class="result-card" style="border-left:4px solid ${category.color};margin-bottom:20px">
      <div style="display:flex;align-items:center;gap:12px;margin-bottom:15px">
        <div style="width:45px;height:45px;background:${category.color}20;border-radius:12px;display:flex;align-items:center;justify-content:center">
          <i class="fas ${category.icon}" style="color:${category.color};font-size:20px"></i>
        </div>
        <div>
          <h3 style="margin:0">${categoryName}</h3>
          <p style="margin:0;font-size:12px;color:var(--text-secondary)">${category.jobs.length} job opportunities available</p>
        </div>
      </div>
      <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:10px">
        ${category.jobs.map(job => `
          <div style="background:var(--bg-input);padding:12px 15px;border-radius:8px;border:1px solid var(--border);font-size:13px;color:var(--text-primary)">
            <i class="fas fa-briefcase" style="color:${category.color};margin-right:8px;font-size:11px"></i>${job}
          </div>
        `).join('')}
      </div>
    </div>
  `;
    }

    // Function to display all job categories
    function displayAllJobCategories() {
      let html = `
    <div class="result-card" style="background:linear-gradient(135deg,rgba(245,158,11,0.1),rgba(56,189,248,0.05));border-color:rgba(245,158,11,0.3);margin-bottom:20px">
      <h3 style="margin-bottom:8px">💼 Job Opportunities for 12th Fail Students</h3>
      <p style="color:var(--text-secondary);font-size:13px">Based on your selection, here are the best job options available for you without requiring 12th pass:</p>
    </div>
  `;

      for (const [categoryName, category] of Object.entries(jobCategoriesData)) {
        html += displayJobCategoryResults(categoryName);
      }

      return html;
    }

    // Main matchCareers function - Enhanced
    function matchCareers() {
      const skills = document.getElementById('userSkills').value.toLowerCase();
      const sector = document.getElementById('prefSector').value;
      const qualified = document.getElementById('qualifiedLevel').value;
      const targetCareer = document.getElementById('targetCareer').value;

      // If user selects "No - 12th Fail" (not qualified), show job categories
      if (qualified === 'no') {
        if (targetCareer && jobCategoriesData[targetCareer]) {
          document.getElementById('careerResults').innerHTML = displayJobCategoryResults(targetCareer);
        } else {
          document.getElementById('careerResults').innerHTML = displayAllJobCategories();
        }
        return;
      }

      // If user selects a specific target career category, show those jobs
      if (targetCareer && jobCategoriesData[targetCareer]) {
        document.getElementById('careerResults').innerHTML = displayJobCategoryResults(targetCareer);
        return;
      }

      const roles = [
        { title: 'Software Developer', sector: 'Technology', skills: ['python', 'javascript', 'programming', 'react', 'node', 'html', 'css'], desc: 'Build applications, websites, and software systems' },
        { title: 'Data Scientist', sector: 'Technology', skills: ['python', 'machine learning', 'data analysis', 'statistics', 'sql', 'tensorflow', 'pandas'], desc: 'Extract insights from complex datasets using AI/ML' },
        { title: 'Business Analyst', sector: 'Business', skills: ['excel', 'communication', 'analysis', 'sql', 'business', 'powerpoint', 'reporting'], desc: 'Bridge business needs and technology solutions' },
        { title: 'UX Designer', sector: 'Design', skills: ['design', 'figma', 'ux', 'user research', 'creativity', 'wireframing', 'prototyping'], desc: 'Create intuitive and delightful user experiences' },
        { title: 'Digital Marketer', sector: 'Marketing', skills: ['marketing', 'seo', 'content', 'social media', 'analytics', 'google ads', 'email'], desc: 'Drive growth through digital marketing channels' },
        { title: 'Financial Analyst', sector: 'Finance', skills: ['finance', 'excel', 'accounting', 'analysis', 'investment', 'financial modeling', 'bloomberg'], desc: 'Analyze financial data and guide investment decisions' },
        { title: 'Product Manager', sector: 'Business', skills: ['communication', 'roadmapping', 'agile', 'user research', 'analytics', 'leadership', 'strategy'], desc: 'Define product vision and drive cross-functional teams' },
        { title: 'DevOps Engineer', sector: 'Technology', skills: ['linux', 'docker', 'kubernetes', 'ci/cd', 'aws', 'cloud', 'automation'], desc: 'Bridge development and operations for faster delivery' },
      ];
      const userArr = skills.split(',').map(s => s.trim()).filter(Boolean);

      // Calculate scores and generate mock AIR for ranking
      const results = roles
        .filter(r => !sector || r.sector === sector)
        .map(r => {
          const matched = r.skills.filter(s => userArr.some(u => u.includes(s) || s.includes(u)));
          const score = userArr.length ? Math.min(100, Math.round((matched.length / r.skills.length) * 100 + Math.random() * 5)) : Math.floor(30 + Math.random() * 40);
          // Generate AIR based on score (higher score = better rank = lower AIR)
          const air = generateAIR(r.title, score);
          return { ...r, score, matched, air };
        })
        .sort((a, b) => a.air - b.air); // Sort by AIR (lower is better)

      document.getElementById('careerResults').innerHTML = results.map(r => {
        const qualified = isQualified(r.air);
        return `
    <div class="result-card" style="border-left:4px solid ${qualified ? '#22C55E' : '#F59E0B'}">
      <div style="display:flex;justify-content:space-between;align-items:flex-start">
        <div>
          <h3>${r.title} <span style="font-size:11px;color:var(--text-muted);font-weight:400">${r.sector}</span></h3>
          <div class="match-score"><i class="fas fa-bullseye"></i> ${r.score}% Match | <i class="fas fa-rank"></i> AIR: ${r.air}</div>
        </div>
        <span style="padding:4px 10px;border-radius:20px;font-size:11px;font-weight:600;${qualified ? 'background:rgba(34,197,94,0.15);color:#22C55E' : 'background:rgba(245,158,11,0.15);color:#F59E0B'}">
          ${qualified ? '✅ QUALIFIED' : '⚠️ NEEDS WORK'}
        </span>
      </div>
      <p style="color:var(--text-secondary);font-size:13px;margin-top:8px">${r.desc}</p>
      <div class="progress-bar"><div class="progress-fill" style="width:${r.score}%"></div></div>
      <div class="skill-tags">
        ${r.skills.map(s => `<span class="skill-tag ${r.matched.includes(s) ? 'present' : 'missing'}">${s}</span>`).join('')}
      </div>
      <div style="margin-top:15px;display:flex;gap:10px;flex-wrap:wrap">
        <button onclick="startQuiz('${r.title}')" style="padding:8px 16px;background:var(--primary);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:12px;font-weight:600;display:flex;align-items:center;gap:6px">
          <i class="fas fa-clipboard-list"></i> Take Quiz
        </button>
        ${!qualified ? `
          <button onclick="showAlternatives('${r.title}')" style="padding:8px 16px;background:transparent;color:var(--text-secondary);border:1.5px solid var(--border);border-radius:8px;cursor:pointer;font-size:12px;display:flex;align-items:center;gap:6px">
            <i class="fas fa-lightbulb"></i> View Alternatives
          </button>
        ` : ''}
      </div>
      <div id="quiz-${r.title.replace(/\s/g, '')}"></div>
    </div>
  `}).join('');

      // Add summary
      const qualifiedCount = results.filter(r => isQualified(r.air)).length;
      document.getElementById('careerResults').innerHTML = `
    <div class="result-card" style="background:linear-gradient(135deg,rgba(245,158,11,0.1),rgba(56,189,248,0.05));border-color:rgba(245,158,11,0.3)">
      <h3 style="margin-bottom:8px">📊 Career Match Summary</h3>
      <p style="color:var(--text-secondary);font-size:13px">Based on your skills, we found <strong>${results.length}</strong> matching careers. 
      <strong>${qualifiedCount}</strong> require AIR < 1500 for direct qualification.</p>
      <p style="color:var(--text-muted);font-size:12px;margin-top:8px">💡 Tip: Take quizzes to check your eligibility. If not qualified, explore alternative careers or improve your skills!</p>
    </div>
  ` + document.getElementById('careerResults').innerHTML;
    }

    // Show alternative careers
    function showAlternatives(career) {
      const userSkills = document.getElementById('userSkills').value;
      const alternatives = getAlternativeCareers(career, userSkills);

      const altHTML = `
    <div class="result-card" style="margin-top:15px;background:var(--bg-input);border:1px solid var(--primary)">
      <h4 style="color:var(--primary);margin-bottom:12px">💡 Alternative Career Paths</h4>
      <p style="font-size:13px;color:var(--text-secondary);margin-bottom:15px">Since ${career} requires AIR < 1500, here are alternative paths based on your skills:</p>
      <div style="display:flex;flex-direction:column;gap:10px">
        ${alternatives.map(alt => `
          <div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:var(--bg-card);border-radius:8px;border:1px solid var(--border)">
            <div>
              <span style="font-size:14px;color:var(--text-primary);font-weight:600">${alt.career}</span>
              <span style="display:block;font-size:11px;color:var(--text-muted)">${alt.score}% skill match</span>
            </div>
            <button onclick="startQuiz('${alt.career}')" style="padding:6px 12px;background:var(--primary);color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:11px">
              Take Quiz
            </button>
          </div>
        `).join('')}
      </div>
    </div>
  `;

      // Find career card and add alternatives
      const cards = document.querySelectorAll('.result-card');
      cards.forEach(card => {
        if (card.querySelector('h3')?.textContent.includes(career)) {
          const existingAlt = card.querySelector('.alternatives-section');
          if (existingAlt) {
            existingAlt.remove();
          }
          const altDiv = document.createElement('div');
          altDiv.className = 'alternatives-section';
          altDiv.innerHTML = altHTML;
          card.appendChild(altDiv);
        }
      });
    }

    // ════════════════════════════════════════
    // SKILL GAP
    // ════════════════════════════════════════
    function analyzeSkillGap() {
      const role = document.getElementById('targetRole').value;
      const skills = document.getElementById('currentSkills').value.toLowerCase().split(',').map(s => s.trim()).filter(Boolean);
      if (!role) { showToast('Please select a target role', 'error'); return; }
      const roleSkills = {
        'Software Developer': ['python', 'javascript', 'git', 'data structures', 'algorithms', 'react', 'sql', 'testing'],
        'Data Scientist': ['python', 'machine learning', 'sql', 'statistics', 'tensorflow', 'pandas', 'data viz', 'r'],
        'Business Analyst': ['excel', 'sql', 'communication', 'powerpoint', 'business acumen', 'data analysis', 'stakeholder mgmt'],
        'Product Manager': ['communication', 'roadmapping', 'agile', 'user research', 'analytics', 'leadership', 'jira'],
        'UX Designer': ['figma', 'ux research', 'prototyping', 'wireframing', 'design thinking', 'adobe xd', 'usability testing'],
        'IAS Officer': ['general knowledge', 'essay writing', 'reasoning', 'ethics', 'public administration', 'current affairs', 'aptitude'],
      };
      const required = roleSkills[role] || [];
      const present = required.filter(s => skills.some(u => u.includes(s) || s.includes(u)));
      const missing = required.filter(s => !present.includes(s));
      const score = Math.round((present.length / required.length) * 100);

      document.getElementById('skillGapResults').innerHTML = `
    <div class="result-card">
      <h3>Readiness Analysis: ${role}</h3>
      <div class="match-score"><i class="fas fa-chart-pie"></i> ${score}% Ready</div>
      <div class="progress-bar"><div class="progress-fill" style="width:${score}%"></div></div>
      <p style="margin-top:10px;font-size:13px;color:var(--text-secondary)">${score >= 70 ? '🎉 Great readiness! Focus on filling the remaining gaps.' : score >= 40 ? '📈 Good start! Keep building these missing skills.' : '🌱 Early stage — focus on the foundational skills first.'}</p>
    </div>
    <div class="result-card">
      <h3>✅ Skills You Have (${present.length}/${required.length})</h3>
      <div class="skill-tags">${present.length ? present.map(s => `<span class="skill-tag present"><i class="fas fa-check" style="font-size:9px"></i> ${s}</span>`).join('') : '<span style="color:var(--text-muted);font-size:13px">None matched — try being more specific</span>'}</div>
    </div>
    <div class="result-card">
      <h3>🎯 Skills to Develop (${missing.length})</h3>
      <div class="skill-tags">${missing.length ? missing.map(s => `<span class="skill-tag missing"><i class="fas fa-plus" style="font-size:9px"></i> ${s}</span>`).join('') : '<span class="skill-tag present">🌟 You have all required skills!</span>'}</div>
      ${missing.length ? `<p style="margin-top:12px;font-size:12px;color:var(--text-secondary)">💡 <strong>Tip:</strong> Focus on 1-2 skills at a time. Use free resources like Coursera, YouTube, or documentation.</p>` : ''}
    </div>
  `;
    }

    // ════════════════════════════════════════
    // EXAMS
    // ════════════════════════════════════════
    function filterExams() {
      const type = document.getElementById('examType').value;
      const edu = document.getElementById('examEdu').value;
      const qualified = document.getElementById('examQualified').value;
      const career = document.getElementById('examCareer').value;

      // If user selects "No - 12th Fail" (not qualified), show job categories instead of exams
      if (qualified === 'no') {
        if (career && jobCategoriesData[career]) {
          document.getElementById('examResults').innerHTML = displayJobCategoryResults(career);
        } else {
          document.getElementById('examResults').innerHTML = displayAllJobCategories();
        }
        return;
      }

      // If user selects a specific target career category, show those jobs
      if (career && jobCategoriesData[career]) {
        document.getElementById('examResults').innerHTML = displayJobCategoryResults(career);
        return;
      }

      const exams = [
        { name: 'JEE Main & Advanced', type: 'Engineering Entrance', edu: "Class 12", career: 'Software Developer', desc: 'Premier engineering entrance for IITs, NITs & top engineering colleges', difficulty: 'High', date: 'Jan-Apr annually', official_website: 'https://jeemain.nta.nic.in/' },
        { name: 'NEET', type: 'Medical Entrance', edu: "Class 12", career: 'Doctor', desc: 'National medical entrance for MBBS/BDS admission', difficulty: 'High', date: 'May annually', official_website: 'https://neet.nta.nic.in/' },
        { name: 'UPSC Civil Services', type: 'Government Services', edu: "Bachelor's", career: 'IAS Officer', desc: 'India\'s most prestigious exam for IAS, IPS, IFS officers', difficulty: 'Very High', date: 'Prelims: May/June', official_website: 'https://www.upsc.gov.in/' },
        { name: 'CAT', type: 'Management Entrance', edu: "Bachelor's", career: 'Business Analyst', desc: 'IIM & top B-school entrance for MBA/PGDM programs', difficulty: 'High', date: 'November annually', official_website: 'https://iimcat.ac.in/' },
        { name: 'IBPS PO', type: 'Banking', edu: "Bachelor's", career: 'Bank PO', desc: 'Probationary Officer recruitment for 11 public sector banks', difficulty: 'Medium', date: 'Oct-Dec annually', official_website: 'https://www.ibps.in/' },
        { name: 'GATE', type: 'Engineering Entrance', edu: "Bachelor's", career: 'Software Developer', desc: 'Graduate Engineering Aptitude Test for M.Tech & PSU jobs', difficulty: 'High', date: 'Feb annually', official_website: 'https://gate2024.iisc.ac.in/' },
        { name: 'NDA', type: 'Defense Services', edu: "Class 12", career: 'Defense Officer', desc: 'National Defence Academy entrance for Army, Navy, Air Force', difficulty: 'Medium', date: 'Apr & Sep annually', official_website: 'https://www.upsc.gov.in/' },
        { name: 'SSC CGL', type: 'Government Services', edu: "Bachelor's", career: 'Government Officer', desc: 'Combined Graduate Level exam for central govt posts', difficulty: 'Medium', date: 'Multiple stages', official_website: 'https://ssc.nic.in/' },
      ];
      const filtered = exams.filter(e => (!type || e.type === type) && (!edu || e.edu === edu));
      if (!filtered.length) { document.getElementById('examResults').innerHTML = '<div class="result-card"><p style="color:var(--text-secondary)">No exams found for the selected filters. Try clearing filters.</p></div>'; return; }
      document.getElementById('examResults').innerHTML = filtered.map(e => `
    <div class="result-card" style="position:relative">
      <a href="${e.official_website}" target="_blank" style="position:absolute;top:15px;right:15px;padding:6px 12px;background:var(--primary);color:#fff;border-radius:6px;font-size:11px;font-weight:600;text-decoration:none;display:flex;align-items:center;gap:5px;transition:all .2s" onmouseover="this.style.background='var(--primary-dark)'" onmouseout="this.style.background='var(--primary)'"><i class="fas fa-globe"></i> Visit Website</a>
      <h3>${e.name}</h3>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px">
        <div class="match-score"><i class="fas fa-tag"></i> ${e.type}</div>
        <div class="match-score" style="background:rgba(56,189,248,.1);color:var(--accent)"><i class="fas fa-calendar"></i> ${e.date}</div>
      </div>
      <p style="color:var(--text-secondary);font-size:13px;margin-bottom:10px">${e.desc}</p>
      <div class="skill-tags">
        <span class="skill-tag present"><i class="fas fa-graduation-cap" style="font-size:9px"></i> ${e.edu}</span>
        <span class="skill-tag"><i class="fas fa-briefcase" style="font-size:9px"></i> ${e.career}</span>
        <span class="skill-tag ${e.difficulty === 'Very High' ? 'missing' : e.difficulty === 'High' ? 'missing' : ''}">${e.difficulty} Difficulty</span>
      </div>
    </div>
  `).join('');
    }

    // ════════════════════════════════════════
    // ROADMAP
    // ════════════════════════════════════════
    function generateRoadmap() {
      const role = document.getElementById('roadmapRole').value;
      const level = document.getElementById('currentLevel').value;
      if (!role) { showToast('Please select a role', 'error'); return; }
      const roadmaps = {
        'Software Developer': {
          beginner: [
            { stage: 'Stage 1: Foundations', icon: 'fa-seedling', color: '#22C55E', items: ['Learn HTML, CSS basics', 'JavaScript fundamentals', 'Git & GitHub basics', 'Build a personal portfolio site', 'Complete 1 beginner project'] },
            { stage: 'Stage 2: Core Skills', icon: 'fa-tools', color: '#F59E0B', items: ['Pick a framework (React/Vue)', 'Learn a backend language (Node/Python)', 'Databases: SQL & MongoDB basics', 'RESTful APIs', 'Build 2-3 real projects'] },
            { stage: 'Stage 3: Job Ready', icon: 'fa-rocket', color: 'var(--accent)', items: ['DSA & LeetCode practice', 'System design basics', 'Portfolio with 3+ projects', 'Apply to internships', 'Mock interviews & networking'] },
          ],
          intermediate: [
            { stage: 'Stage 1: Level Up', icon: 'fa-seedling', color: '#22C55E', items: ['Advanced JavaScript patterns', 'Pick a specialization (Frontend/Backend/Full Stack)', 'Learn Docker basics', 'Improve system design knowledge'] },
            { stage: 'Stage 2: Advanced Skills', icon: 'fa-tools', color: '#F59E0B', items: ['Cloud platforms (AWS/GCP/Azure)', 'CI/CD pipelines', 'Testing (Unit, Integration, E2E)', 'Open source contributions'] },
            { stage: 'Stage 3: Senior Ready', icon: 'fa-rocket', color: 'var(--accent)', items: ['Lead a team project', 'System design interviews', 'Salary negotiation skills', 'Target senior/lead roles'] },
          ],
        },
        'Data Scientist': {
          beginner: [
            { stage: 'Stage 1: Foundations', icon: 'fa-seedling', color: '#22C55E', items: ['Python basics (NumPy, Pandas)', 'Statistics & Probability', 'SQL fundamentals', 'Excel for data analysis', 'Kaggle beginner courses'] },
            { stage: 'Stage 2: ML Skills', icon: 'fa-tools', color: '#F59E0B', items: ['Scikit-learn & Machine Learning', 'Data visualization (Matplotlib, Seaborn)', 'Feature engineering', 'Kaggle competitions', 'Build 2 ML projects'] },
            { stage: 'Stage 3: Job Ready', icon: 'fa-rocket', color: 'var(--accent)', items: ['Deep Learning (TensorFlow/PyTorch)', 'Deploy models (Flask/FastAPI)', 'Build a portfolio on GitHub', 'Apply for data analyst/scientist roles'] },
          ],
        },
      };
      const plan = roadmaps[role]?.[level] || roadmaps[role]?.beginner || [
        { stage: 'Stage 1: Learn the Basics', icon: 'fa-seedling', color: '#22C55E', items: ['Research the field thoroughly', 'Take foundational online courses', 'Join relevant communities', 'Set a 90-day learning goal'] },
        { stage: 'Stage 2: Build Skills', icon: 'fa-tools', color: '#F59E0B', items: ['Work on real projects', 'Find a mentor in the field', 'Network on LinkedIn', 'Build a portfolio'] },
        { stage: 'Stage 3: Enter the Field', icon: 'fa-rocket', color: 'var(--accent)', items: ['Apply for entry-level roles', 'Prepare for interviews', 'Negotiate your offer', 'Keep learning continuously'] },
      ];

      document.getElementById('roadmapResults').innerHTML = `
    <div class="result-card"><h3>🗺️ Roadmap: ${role} <span style="font-size:12px;color:var(--text-muted);font-weight:400">(${level.charAt(0).toUpperCase() + level.slice(1)} Track)</span></h3><p style="color:var(--text-secondary);font-size:13px;margin-top:6px">Estimated time: ${level === 'beginner' ? '6-12 months' : level === 'intermediate' ? '3-6 months' : '1-3 months'} to job-ready</p></div>
    ${plan.map((s, i) => `
      <div class="result-card" style="border-left:3px solid ${s.color}">
        <h3><i class="fas ${s.icon}" style="color:${s.color};margin-right:8px"></i>${s.stage}</h3>
        <ul style="margin-top:10px;padding-left:18px;color:var(--text-secondary);font-size:13px;line-height:2.1">
          ${s.items.map(item => `<li>${item}</li>`).join('')}
        </ul>
      </div>
    `).join('')}
  `;
    }

    // ════════════════════════════════════════
    // INTERVIEW PREP
    // ════════════════════════════════════════
    function prepareInterview() {
      const role = document.getElementById('interviewRole').value;
      const level = document.getElementById('expLevel').value;
      if (!role) { showToast('Please select a role', 'error'); return; }
      const roleQs = {
        'Software Developer': {
          technical: ['Explain the difference between var, let, and const in JavaScript.', 'What is the time complexity of binary search?', 'What is REST API and how does it differ from GraphQL?', 'Explain object-oriented programming principles.', 'What happens when you type a URL in a browser?'],
          behavioral: ['Tell me about a challenging bug you fixed and how you approached it.', 'Describe a project you built from scratch. What did you learn?', 'How do you handle technical debt in your projects?'],
          situational: ['You have 2 days to ship a feature but it has a critical bug. What do you do?', 'A teammate disagrees with your code approach. How do you handle it?'],
        },
        'Data Scientist': {
          technical: ['What is the difference between supervised and unsupervised learning?', 'Explain overfitting and how you would prevent it.', 'When would you use a Random Forest vs. XGBoost?', 'How do you handle missing data in a dataset?', 'What is cross-validation and why is it important?'],
          behavioral: ['Describe a data project that had a real business impact.', 'How do you communicate technical findings to non-technical stakeholders?'],
          situational: ['Your model has 90% accuracy but performs poorly on a specific user group. What do you do?'],
        },
        'Business Analyst': {
          technical: ['Write a SQL query to find the top 5 customers by revenue.', 'How do you gather and document requirements from stakeholders?', 'Explain the difference between a use case and a user story.'],
          behavioral: ['Tell me about a time you turned ambiguous requirements into a clear solution.', 'How do you prioritize competing business needs?'],
          situational: ['A key stakeholder keeps changing requirements. How do you manage this?'],
        },
      };
      const qs = roleQs[role] || { technical: ['Tell me about your experience relevant to this role.'], behavioral: ['Why do you want this role?'], situational: ['How would you handle a difficult deadline?'] };

      document.getElementById('interviewResults').innerHTML = `
    <div class="result-card"><h3>💼 Interview Prep: ${role} <span style="font-size:12px;color:var(--text-muted)">(${level.charAt(0).toUpperCase() + level.slice(1)} Level)</span></h3><p style="color:var(--text-secondary);font-size:13px;margin-top:5px">Practice these questions out loud. Use the STAR method for behavioral questions.</p></div>
    ${Object.entries(qs).map(([type, questions]) => `
      <div class="result-card">
        <h3><i class="fas fa-${type === 'technical' ? 'code' : type === 'behavioral' ? 'user' : 'lightbulb'}" style="color:var(--primary);margin-right:8px"></i>${type.charAt(0).toUpperCase() + type.slice(1)} Questions</h3>
        <div style="margin-top:12px;display:flex;flex-direction:column;gap:9px">
          ${questions.map((q, i) => `
            <div style="background:var(--bg-input);border-radius:9px;padding:13px 15px;border-left:3px solid var(--primary)">
              <span style="color:var(--primary);font-size:11px;font-weight:700">Q${i + 1}</span>
              <p style="color:var(--text-primary);font-size:13px;margin-top:4px;line-height:1.55">${q}</p>
            </div>
          `).join('')}
        </div>
      </div>
    `).join('')}
    <div class="result-card" style="background:rgba(245,158,11,.06);border-color:rgba(245,158,11,.2)">
      <h3>💡 Pro Tips for ${level === 'fresher' ? 'Freshers' : 'Experienced Professionals'}</h3>
      <ul style="margin-top:10px;padding-left:18px;color:var(--text-secondary);font-size:13px;line-height:2.1">
        ${level === 'fresher'
          ? ['Showcase your projects & side work', 'Emphasize eagerness to learn', 'Research the company culture deeply', 'Dress professionally & arrive early', 'Follow up with a thank-you email'].map(t => `<li>${t}</li>`).join('')
          : ['Quantify your past achievements', 'Show leadership & mentoring examples', 'Ask strategic questions about team structure', 'Negotiate salary — know your market value', 'Connect with the interviewer on LinkedIn after'].map(t => `<li>${t}</li>`).join('')
        }
      </ul>
    </div>
  `;
    }

    // ════════════════════════════════════════
    // TOAST
    // ════════════════════════════════════════
    function showToast(msg, type = 'success') {
      const toast = document.getElementById('toast');
      const span = document.getElementById('toastMsg');
      span.textContent = msg;
      toast.className = 'toast' + (type === 'error' ? ' error' : '');
      void toast.offsetWidth;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // ════════════════════════════════════════
    // QUICK ACTION STEPS - Contextual Functions
    // ════════════════════════════════════════

    // Get conversation context from mentor chat
    function getMentorConversationContext() {
      const container = document.getElementById('mentorMessages');
      if (!container) return { messages: [], topics: [] };

      const messages = container.querySelectorAll('.message-content');
      const text = Array.from(messages).map(m => m.textContent).join(' ').toLowerCase();

      // Detect topics from conversation
      const topics = [];
      if (text.includes('career') || text.includes('job') || text.includes('role')) topics.push('career');
      if (text.includes('skill') || text.includes('learn') || text.includes('develop')) topics.push('skills');
      if (text.includes('exam') || text.includes('test') || text.includes('preparation')) topics.push('exams');
      if (text.includes('interview')) topics.push('interview');
      if (text.includes('stress') || text.includes('anxiety') || text.includes('overwhelm') || text.includes('stressed')) topics.push('stress');
      if (text.includes('confused') || text.includes('unsure') || text.includes('direction')) topics.push('confusion');
      if (text.includes('motivation') || text.includes('demotivated') || text.includes('low')) topics.push('motivation');

      return { text, topics };
    }

    // CREATE A PLAN - Generates personalized plan based on conversation
    function createPlan() {
      const { text, topics } = getMentorConversationContext();
      const u = appState.user;
      let response = '';

      // Check what user has been talking about
      if (topics.includes('career') || u.targetRole) {
        const target = u.targetRole || 'your target career';
        response = `📋 <strong>Personalized Career Action Plan for ${u.firstName || 'you'}</strong><br><br>`;
        response += `🎯 <strong>Goal:</strong> Transition to ${target}<br><br>`;
        response += `📅 <strong>Week 1-2:</strong><br>`;
        response += `• Research 3-5 companies in ${target} field<br>`;
        response += `• Update your resume highlighting relevant skills<br>`;
        response += `• Join LinkedIn groups related to ${target}<br><br>`;
        response += `📅 <strong>Week 3-4:</strong><br>`;
        response += `• Complete 2-3 relevant online courses<br>`;
        response += `• Build a portfolio project<br>`;
        response += `• Reach out to 5 professionals in the field<br><br>`;
        response += `📅 <strong>Month 2:</strong><br>`;
        response += `• Apply to 10+ jobs<br>`;
        response += `• Practice interview questions<br>`;
        response += `• Attend career fairs or virtual events<br><br>`;
        response += `💡 <em>Based on your conversation, I'll help you stay focused on ${target}!</em>`;
      }
      else if (topics.includes('skills')) {
        response = `📋 <strong>Personalized Skill Development Plan</strong><br><br>`;
        response += `Based on your skills conversation, here's your learning path:<br><br>`;
        response += `📚 <strong>Immediate (This Week):</strong><br>`;
        response += `• Identify top 3 skills to learn<br>`;
        response += `• Enroll in beginner courses<br>`;
        response += `• Set daily 1-hour learning schedule<br><br>`;
        response += `🛠️ <strong>Short-term (This Month):</strong><br>`;
        response += `• Complete 1 major course<br>`;
        response += `• Build 1 project using new skills<br>`;
        response += `• Join skill-specific communities<br><br>`;
        response += `🚀 <strong>Long-term (3 Months):</strong><br>`;
        response += `• Become proficient in target skills<br>`;
        response += `• Add to portfolio/resume<br>`;
        response += `• Start applying for roles requiring these skills`;
      }
      else if (topics.includes('exams')) {
        response = `📋 <strong>Exam Preparation Roadmap</strong><br><br>`;
        response += `🗓️ <strong>Phase 1 (Weeks 1-4):</strong><br>`;
        response += `• Understand exam pattern & syllabus<br>`;
        response += `• Gather study materials & resources<br>`;
        response += `• Create study schedule<br>`;
        response += `• Complete 30% of syllabus<br><br>`;
        response += `📖 <strong>Phase 2 (Weeks 5-8):</strong><br>`;
        response += `• Complete 70% of syllabus<br>`;
        response += `• Start solving practice papers<br>`;
        response += `• Join test series<br><br>`;
        response += `✅ <strong>Phase 3 (Weeks 9-12):</strong><br>`;
        response += `• Complete full syllabus<br>`;
        response += `• Take weekly mock tests<br>`;
        response += `• Focus on weak areas<br>`;
        response += `• Final revision`;
      }
      else if (topics.includes('stress') || topics.includes('confusion')) {
        response = `📋 <strong>Step-by-Step Action Plan for Clarity</strong><br><br>`;
        response += `Given what you shared about feeling stressed/confused:<br><br>`;
        response += `🌅 <strong>Today:</strong><br>`;
        response += `• Take 3 deep breaths<br>`;
        response += `• Write down what's worrying you<br>`;
        response += `• Make a list of what you CAN control<br><br>`;
        response += `📝 <strong>This Week:</strong><br>`;
        response += `• Talk to one person about your concerns<br>`;
        response += `• Research one career option that interests you<br>`;
        response += `• Set ONE small goal to work on<br><br>`;
        response += `🎯 <strong>This Month:</strong><br>`;
        response += `• Complete the Career Match assessment<br>`;
        response += `• Connect with one professional in your field of interest<br>`;
        response += `• Create a simple 90-day plan`;
      }
      else {
        // Default plan based on user's profile
        response = `📋 <strong>Your Personal Action Plan</strong><br><br>`;
        response += `Hi ${u.firstName || 'there'}! Based on your profile and conversation:<br><br>`;

        if (u.targetRole) {
          response += `🎯 <strong>Your Target:</strong> ${u.targetRole}<br><br>`;
          response += `📅 <strong>This Week:</strong><br>`;
          response += `• Complete your profile setup<br>`;
          response += `• Explore the Career Match section<br>`;
          response += `• List your current skills<br><br>`;
          response += `📅 <strong>This Month:</strong><br>`;
          response += `• Take the Skill Gap assessment<br>`;
          response += `• Generate a Learning Roadmap<br>`;
          response += `• Start one course from the roadmap<br><br>`;
        } else {
          response += `📅 <strong>This Week:</strong><br>`;
          response += `• Complete your profile with target role<br>`;
          response += `• Visit Career Match to find your path<br>`;
          response += `• Add your skills in the profile<br><br>`;
          response += `📅 <strong>This Month:</strong><br>`;
          response += `• Complete Skill Gap analysis<br>`;
          response += `• Generate a Learning Roadmap<br>`;
          response += `• Start exam preparation if applicable`;
        }
      }

      // Add YouTube video links for career guidance
      response += `<br><br>📺 <strong>Helpful YouTube Videos for Career Planning:</strong><br><br>`;
      response += `<div style="display:flex;flex-direction:column;gap:8px;margin-top:10px">`;

      // English videos
      response += `<a href="https://www.youtube.com/watch?v=yxmcHLqbgQw" target="_blank" style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--bg-input);border-radius:8px;text-decoration:none;color:var(--text-primary);transition:background .2s">
    <i class="fab fa-youtube" style="color:#FF0000;font-size:20px"></i>
    <div><strong>Career Planning in 5 Minutes</strong><br><span style="font-size:11px;color:var(--text-secondary)">English • Expert Tips</span></div>
  </a>`;

      response += `<a href="https://www.youtube.com/watch?v=HAnw168huqA" target="_blank" style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--bg-input);border-radius:8px;text-decoration:none;color:var(--text-primary);transition:background .2s">
    <i class="fab fa-youtube" style="color:#FF0000;font-size:20px"></i>
    <div><strong>How to Choose Your Career Path</strong><br><span style="font-size:11px;color:var(--text-secondary)">English • Complete Guide</span></div>
  </a>`;

      // Hindi videos
      response += `<a href="https://www.youtube.com/watch?v=2qKw51F4vT8" target="_blank" style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--bg-input);border-radius:8px;text-decoration:none;color:var(--text-primary);transition:background .2s">
    <i class="fab fa-youtube" style="color:#FF0000;font-size:20px"></i>
    <div><strong>Career Guidance in Hindi</strong><br><span style="font-size:11px;color:var(--text-secondary)">हिंदी • करियर प्लानिंग</span></div>
  </a>`;

      response += `<a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--bg-input);border-radius:8px;text-decoration:none;color:var(--text-primary);transition:background .2s">
    <i class="fab fa-youtube" style="color:#FF0000;font-size:20px"></i>
    <div><strong>Best Career Options in 2024</strong><br><span style="font-size:11px;color:var(--text-secondary)">हिंदी • Career Tips</span></div>
  </a>`;

      response += `</div>`;

      addMentorMsg(response, 'bot');
      showToast('📋 Your personalized plan is ready!');
    }

    // CELEBRATE WINS - Acknowledge achievements
    function celebrateWins() {
      const { text, topics } = getMentorConversationContext();
      const u = appState.user;
      let response = '';

      // Check what user has been discussing
      if (topics.includes('career') || topics.includes('skills') || topics.includes('interview')) {
        response = `🏆 <strong>Let's Celebrate Your Wins!</strong><br><br>`;
        response += `You've taken amazing steps just by being here:<br><br>`;
        response += `⭐ <strong>Already Achieved:</strong><br>`;
        response += `• You've acknowledged you need guidance — that's huge!<br>`;
        response += `• You're actively exploring career options<br>`;
        response += `• You're investing time in your future<br><br>`;

        if (u.targetRole) {
          response += `🎯 <strong>${u.targetRole} Journey:</strong><br>`;
          response += `• You've identified your target role<br>`;
          response += `• You're committed to professional growth<br><br>`;
        }

        if (u.skills) {
          response += `💪 <strong>Your Skills:</strong><br>`;
          response += `• ${u.skills}<br><br>`;
        }

        response += `🌟 <strong>Remember:</strong><br>`;
        response += `Every expert was once a beginner. Your journey to ${u.targetRole || 'success'} is valid, and you're making progress every day!`;
      }
      else if (topics.includes('stress') || topics.includes('motivation')) {
        response = `🏆 <strong>Let's Celebrate Your Strength!</strong><br><br>`;
        response += `I want to acknowledge something important:<br><br>`;
        response += `💪 <strong>You've already won by:</strong><br>`;
        response += `• Recognizing you need support — that's strength, not weakness<br>`;
        response += `• Taking the first step by talking to me<br>`;
        response += `• Being here and wanting to improve<br><br>`;
        response += `🌟 <strong>Your Strengths:</strong><br>`;
        response += `• You care about your future enough to seek help<br>`;
        response += `• You're willing to face challenges head-on<br>`;
        response += `• You've already taken action by starting this conversation<br><br>`;
        response += `✨ Every step forward counts. Be proud of yourself!`;
      }
      else {
        response = `🏆 <strong>Let's Celebrate Your Wins!</strong><br><br>`;
        response += `Hi ${u.firstName || 'there'}! Let's acknowledge your progress:<br><br>`;
        response += `🌟 <strong>Your Achievements So Far:</strong><br>`;
        response += `• You've joined LakshyaSetu AI — great choice!<br>`;
        response += `• You're actively exploring career guidance<br>`;
        response += `• You're investing in your future<br><br>`;

        if (u.targetRole) {
          response += `🎯 You've set your sights on: <strong>${u.targetRole}</strong><br><br>`;
        }

        response += `💡 <strong>Quick Win Today:</strong><br>`;
        response += `Complete your profile, add your skills, and you'll be one step closer to your dream career!<br><br>`;
        response += `Remember: Progress > Perfection. You're doing amazing! 🌟`;
      }

      addMentorMsg(response, 'bot');
      showToast('🎉 Celebration time!');
    }

    // SEEK SUPPORT - Connect with resources
    function seekSupport() {
      const { text, topics } = getMentorConversationContext();
      const u = appState.user;
      let response = '';

      if (topics.includes('career') || u.targetRole) {
        response = `🤝 <strong>Support Resources for Your Journey</strong><br><br>`;
        response += `Here are ways to get support for your ${u.targetRole || 'career'} journey:<br><br>`;
        response += `👥 <strong>Communities to Join:</strong><br>`;
        response += `• LinkedIn groups for ${u.targetRole || 'your target field'}<br>`;
        response += `• Reddit career communities<br>`;
        response += `• Discord servers for professionals<br><br>`;
        response += `📚 <strong>Free Resources:</strong><br>`;
        response += `• Our Career Match section<br>`;
        response += `• Skill Gap analysis<br>`;
        response += `• Learning Roadmap generator<br><br>`;
        response += `💬 <strong>Talk to People:</strong><br>`;
        response += `• Schedule informational interviews<br>`;
        response += `• Find a career mentor on LinkedIn<br>`;
        response += `• Join our AI Mentor chat anytime<br><br>`;
        response += `🌐 <strong>Useful Links:</strong><br>`;
        response += `• LinkedIn Jobs<br>`;
        response += `• Indeed, Naukri, Glassdoor<br>`;
        response += `• Coursera, Udemy (free courses)`;
      }
      else if (topics.includes('stress') || topics.includes('motivation')) {
        response = `🤝 <strong>You're Not Alone — Let's Find Support</strong><br><br>`;
        response += `It's okay to seek help. Here are resources for when you need support:<br><br>`;
        response += `🧠 <strong>Immediate Support:</strong><br>`;
        response += `• Talk to friends/family about your concerns<br>`;
        response += `• Practice 5-4-3-2-1 grounding technique<br>`;
        response += `• Take a walk or do light exercise<br><br>`;
        response += `📞 <strong>Professional Help:</strong><br>`;
        response += `• Career counselors at your institution<br>`;
        response += `• Mental health professionals<br>`;
        response += `• Online therapy platforms<br><br>`;
        response += `💪 <strong>Community Support:</strong><br>`;
        response += `• Join career support groups<br>`;
        response += `• Find an accountability partner<br>`;
        response += `• Connect with others on similar journeys<br><br>`;
        response += `🌟 Remember: Seeking support is a sign of strength, not weakness. I'm always here to chat!`;
      }
      else {
        response = `🤝 <strong>Let's Find You Some Support!</strong><br><br>`;
        response += `Here's how you can get support on your career journey:<br><br>`;
        response += `🎯 <strong>Within LakshyaSetu AI:</strong><br>`;
        response += `• AI Mentor — chat anytime for guidance<br>`;
        response += `• Career Match — find your path<br>`;
        response += `• Skill Gap — know what to learn<br>`;
        response += `• Interview Prep — practice & prepare<br><br>`;
        response += `🌐 <strong>External Support:</strong><br>`;
        response += `• LinkedIn networking<br>`;
        response += `• Career counseling services<br>`;
        response += `• Industry-specific forums<br>`;
        response += `• Mentorship platforms<br><br>`;
        response += `💬 <strong>Pro Tip:</strong><br>`;
        response += `Start by connecting with 3 professionals in your target field on LinkedIn. You'd be surprised how many are willing to help!`;
      }

      addMentorMsg(response, 'bot');
      showToast('🤝 Support resources ready!');
    }

    // STAY BALANCED - Wellness tips
    function stayBalanced() {
      const { text, topics } = getMentorConversationContext();
      const u = appState.user;
      let response = '';

      // If user has been stressed or overwhelmed
      if (topics.includes('stress') || topics.includes('anxiety') || topics.includes('overwhelmed')) {
        response = `⚖️ <strong>Let's Bring Balance Back</strong><br><br>`;
        response += `I noticed you've been feeling overwhelmed. Here's your wellness plan:<br><br>`;
        response += `🌿 <strong>Immediate (Right Now):</strong><br>`;
        response += `• Close your eyes, take 3 deep breaths<br>`;
        response += `• Drink a glass of water<br>`;
        response += `• Step away from screens for 5 minutes<br><br>`;
        response += `📅 <strong>Daily Habits:</strong><br>`;
        response += `• Sleep 7-8 hours<br>`;
        response += `• Exercise for 30 minutes<br>`;
        response += `• Take regular breaks (Pomodoro technique)<br>`;
        response += `• Eat healthy, stay hydrated<br><br>`;
        response += `🧘 <strong>Mindfulness:</strong><br>`;
        response += `• 10-minute meditation daily<br>`;
        response += `• Journal your thoughts<br>`;
        response += `• Practice gratitude — write 3 good things daily<br><br>`;
        response += `💡 <strong>Career Balance:</strong><br>`;
        response += `• Set boundaries — don't overwork<br>`;
        response += `• Celebrate small wins<br>`;
        response += `• Remember: You are more than your career<br><br>`;
        response += `🌟 You are valued. Your worth isn't defined by your job!`;
      }
      else if (topics.includes('motivation') || topics.includes('confusion')) {
        response = `⚖️ <strong>Finding Balance in Your Journey</strong><br><br>`;
        response += `Here's how to maintain balance while pursuing your goals:<br><br>`;
        response += `⚖️ <strong>Work-Life Balance:</strong><br>`;
        response += `• Set specific work hours and stick to them<br>`;
        response += `• Schedule breaks and leisure time<br>`;
        response += `• Don't compare your journey to others<br><br>`;
        response += `🎯 <strong>Goal Balance:</strong><br>`;
        response += `• Focus on one goal at a time<br>`;
        response += `• Break big goals into small steps<br>`;
        response += `• Allow flexibility in your plan<br><br>`;
        response += `💚 <strong>Self-Care:</strong><br>`;
        response += `• Take regular breaks<br>`;
        response += `• Pursue hobbies outside work<br>`;
        response += `• Spend time with loved ones<br><br>`;
        response += `🌟 Balance isn't about doing everything — it's about doing what matters!`;
      }
      else {
        response = `⚖️ <strong>Staying Balanced While You Succeed</strong><br><br>`;
        response += `Here's your wellness toolkit for career success:<br><br>`;
        response += `🌅 <strong>Daily Routine:</strong><br>`;
        response += `• Start day with 10 min meditation<br>`;
        response += `• Exercise for 30 minutes<br>`;
        response += `• Take regular breaks from work<br>`;
        response += `• Sleep 7-8 hours nightly<br><br>`;
        response += `🍎 <strong>Health Habits:</strong><br>`;
        response += `• Stay hydrated (8 glasses water)<br>`;
        response += `• Eat balanced meals<br>`;
        response += `• Limit screen time<br>`;
        response += `• Take micro-breaks every hour<br><br>`;
        response += `🧘 <strong>Mental Wellness:</strong><br>`;
        response += `• Practice gratitude daily<br>`;
        response += `• Journal your progress<br>`;
        response += `• Celebrate small wins<br>`;
        response += `• Remember to breathe!<br><br>`;
        response += `💡 <strong>Pro Tip:</strong><br>`;
        response += `Use the Pomodoro Technique: 25 min work, 5 min break. Repeat!`;
      }

      // Add YouTube video links for wellness and stress management
      response += `<br><br>📺 <strong>Helpful YouTube Videos for Wellness & Balance:</strong><br><br>`;
      response += `<div style="display:flex;flex-direction:column;gap:8px;margin-top:10px">`;

      // English videos
      response += `<a href="https://www.youtube.com/watch?v=inpok4MKVLM" target="_blank" style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--bg-input);border-radius:8px;text-decoration:none;color:var(--text-primary);transition:background .2s">
    <i class="fab fa-youtube" style="color:#FF0000;font-size:20px"></i>
    <div><strong>Work Life Balance Tips</strong><br><span style="font-size:11px;color:var(--text-secondary)">English • Productivity Tips</span></div>
  </a>`;

      response += `<a href="https://www.youtube.com/watch?v=IHh7BfnBWB0" target="_blank" style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--bg-input);border-radius:8px;text-decoration:none;color:var(--text-primary);transition:background .2s">
    <i class="fab fa-youtube" style="color:#FF0000;font-size:20px"></i>
    <div><strong>Stress Management Techniques</strong><br><span style="font-size:11px;color:var(--text-secondary)">English • Mental Health</span></div>
  </a>`;

      // Hindi videos
      response += `<a href="https://www.youtube.com/watch?v=9wT_r2W4xXw" target="_blank" style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--bg-input);border-radius:8px;text-decoration:none;color:var(--text-primary);transition:background .2s">
    <i class="fab fa-youtube" style="color:#FF0000;font-size:20px"></i>
    <div><strong>Stress Management in Hindi</strong><br><span style="font-size:11px;color:var(--text-secondary)">हिंदी • तनाव मुक्ति</span></div>
  </a>`;

      response += `<a href="https://www.youtube.com/watch?v=8x1v5kXa8Wk" target="_blank" style="display:flex;align-items:center;gap:10px;padding:10px;background:var(--bg-input);border-radius:8px;text-decoration:none;color:var(--text-primary);transition:background .2s">
    <i class="fab fa-youtube" style="color:#FF0000;font-size:20px"></i>
    <div><strong>Work Life Balance in Hindi</strong><br><span style="font-size:11px;color:var(--text-secondary)">हिंदी • बैलेंस्ड लाइफ</span></div>
  </a>`;

      response += `</div>`;

      addMentorMsg(response, 'bot');
      showToast('⚖️ Wellness tips loaded!');
    }
  </script>
</body>

</html>
